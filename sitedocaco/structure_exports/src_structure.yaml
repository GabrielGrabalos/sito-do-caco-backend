project_info:
  name: "src"
  path: "/home/genazemildo/Documents/GitHub/sito-do-caco-backend/sitedocaco/src"
  generatedAt: "2026-01-07T16:01:24.816736088"
  totalFiles: 77
  totalSize: 99243
structure:
  "main":
    type: null
    info: null
    children:
      "resources":
        type: null
        info: null
        children:
          "application.properties.example":
            type: "file"
            info:
              "size": "882"
              "last_modified": "2026-01-07T16:01:23.998321772"
              "mime_type": "text/plain"
              "extension": ".example"
            children: null
          "application.properties":
            type: "file"
            info:
              "size": "1636"
              "last_modified": "2026-01-07T16:01:24.081979099"
              "mime_type": "text/x-java-properties"
              "extension": ".properties"
            children: null
      "java":
        type: null
        info: null
        children:
          "com":
            type: null
            info: null
            children:
              "caco":
                type: null
                info: null
                children:
                  "sitedocaco":
                    type: null
                    info: null
                    children:
                      "SitedocacoApplication.java":
                        type: "file"
                        info:
                          "size": "320"
                          "last_modified": "2026-01-07T16:01:24.129818192"
                          "mime_type": "text/x-java-source"
                          "extension": ".java"
                        children: null
                      "config":
                        type: null
                        info: null
                        children:
                          "SecurityConfig.java":
                            type: "file"
                            info:
                              "size": "4365"
                              "last_modified": "2026-01-07T16:01:24.158580434"
                              "mime_type": "text/x-java-source"
                              "extension": ".java"
                            children: null
                          "ImgBBConfig.java":
                            type: "file"
                            info:
                              "size": "438"
                              "last_modified": "2026-01-07T16:01:24.189871467"
                              "mime_type": "text/x-java-source"
                              "extension": ".java"
                            children: null
                      "entity":
                        type: null
                        info: null
                        children:
                          "User.java":
                            type: "file"
                            info:
                              "size": "1105"
                              "last_modified": "2026-01-07T16:01:24.227504854"
                              "mime_type": "text/x-java-source"
                              "extension": ".java"
                            children: null
                          "home":
                            type: null
                            info: null
                            children:
                              "Banner.java":
                                type: "file"
                                info:
                                  "size": "591"
                                  "last_modified": "2026-01-07T16:01:24.250036825"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "Warning.java":
                                type: "file"
                                info:
                                  "size": "905"
                                  "last_modified": "2026-01-07T16:01:24.27246621"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "News.java":
                                type: "file"
                                info:
                                  "size": "1103"
                                  "last_modified": "2026-01-07T16:01:24.294334229"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                          "event":
                            type: null
                            info: null
                            children:
                              "Event.java":
                                type: "file"
                                info:
                                  "size": "1422"
                                  "last_modified": "2026-01-07T16:01:24.353833089"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "EventGalleryItem.java":
                                type: "file"
                                info:
                                  "size": "624"
                                  "last_modified": "2026-01-07T16:01:24.369607837"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                          "manual":
                            type: null
                            info: null
                            children:
                              "ManualCategory.java":
                                type: "file"
                                info:
                                  "size": "813"
                                  "last_modified": "2026-01-07T16:01:24.389369669"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "ManualChapter.java":
                                type: "file"
                                info:
                                  "size": "910"
                                  "last_modified": "2026-01-07T16:01:24.409065168"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "ManualArticle.java":
                                type: "file"
                                info:
                                  "size": "784"
                                  "last_modified": "2026-01-07T16:01:24.430838065"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "ArticleFeedback.java":
                                type: "file"
                                info:
                                  "size": "771"
                                  "last_modified": "2026-01-07T16:01:24.44279969"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                          "exam":
                            type: null
                            info: null
                            children:
                              "Exam.java":
                                type: "file"
                                info:
                                  "size": "773"
                                  "last_modified": "2026-01-07T16:01:24.454851678"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "Subject.java":
                                type: "file"
                                info:
                                  "size": "461"
                                  "last_modified": "2026-01-07T16:01:24.464674902"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                          "sticker":
                            type: null
                            info: null
                            children:
                              "Sticker.java":
                                type: "file"
                                info:
                                  "size": "720"
                                  "last_modified": "2026-01-07T16:01:24.472010465"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "UserSticker.java":
                                type: "file"
                                info:
                                  "size": "617"
                                  "last_modified": "2026-01-07T16:01:24.478389953"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "RedemptionCode.java":
                                type: "file"
                                info:
                                  "size": "617"
                                  "last_modified": "2026-01-07T16:01:24.484009291"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                          "AnalyticsLog.java":
                            type: "file"
                            info:
                              "size": "693"
                              "last_modified": "2026-01-07T16:01:24.491249078"
                              "mime_type": "text/x-java-source"
                              "extension": ".java"
                            children: null
                          "store":
                            type: null
                            info: null
                            children:
                              "Product.java":
                                type: "file"
                                info:
                                  "size": "1452"
                                  "last_modified": "2026-01-07T16:01:24.49903818"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "ProductVariation.java":
                                type: "file"
                                info:
                                  "size": "654"
                                  "last_modified": "2026-01-07T16:01:24.50625237"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                          "enums":
                            type: null
                            info: null
                            children:
                              "Role.java":
                                type: "file"
                                info:
                                  "size": "99"
                                  "last_modified": "2026-01-07T16:01:24.513711651"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "ImageType.java":
                                type: "file"
                                info:
                                  "size": "1394"
                                  "last_modified": "2026-01-07T16:01:24.519387666"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "SeverityLevel.java":
                                type: "file"
                                info:
                                  "size": "117"
                                  "last_modified": "2026-01-07T16:01:24.524832102"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "ExamType.java":
                                type: "file"
                                info:
                                  "size": "122"
                                  "last_modified": "2026-01-07T16:01:24.530277166"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                      "security":
                        type: null
                        info: null
                        children:
                          "oauth2":
                            type: null
                            info: null
                            children:
                              "CustomOAuth2UserService.java":
                                type: "file"
                                info:
                                  "size": "2486"
                                  "last_modified": "2026-01-07T16:01:24.538796101"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "OAuth2LoginSuccessHandler.java":
                                type: "file"
                                info:
                                  "size": "2037"
                                  "last_modified": "2026-01-07T16:01:24.543919657"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "OAuth2LoginFailureHandler.java":
                                type: "file"
                                info:
                                  "size": "2046"
                                  "last_modified": "2026-01-07T16:01:24.549238125"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                          "jwt":
                            type: null
                            info: null
                            children:
                              "JwtService.java":
                                type: "file"
                                info:
                                  "size": "1837"
                                  "last_modified": "2026-01-07T16:01:24.554853219"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "JwtAuthenticationFilter.java":
                                type: "file"
                                info:
                                  "size": "2721"
                                  "last_modified": "2026-01-07T16:01:24.558761983"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "UserDetailsServiceImpl.java":
                                type: "file"
                                info:
                                  "size": "1677"
                                  "last_modified": "2026-01-07T16:01:24.563273206"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                      "repository":
                        type: null
                        info: null
                        children:
                          "UserRepository.java":
                            type: "file"
                            info:
                              "size": "413"
                              "last_modified": "2026-01-07T16:01:24.571061492"
                              "mime_type": "text/x-java-source"
                              "extension": ".java"
                            children: null
                          "BannerRepository.java":
                            type: "file"
                            info:
                              "size": "743"
                              "last_modified": "2026-01-07T16:01:24.57499954"
                              "mime_type": "text/x-java-source"
                              "extension": ".java"
                            children: null
                          "WarningRepository.java":
                            type: "file"
                            info:
                              "size": "747"
                              "last_modified": "2026-01-07T16:01:24.579395739"
                              "mime_type": "text/x-java-source"
                              "extension": ".java"
                            children: null
                          "NewsRepository.java":
                            type: "file"
                            info:
                              "size": "994"
                              "last_modified": "2026-01-07T16:01:24.58361364"
                              "mime_type": "text/x-java-source"
                              "extension": ".java"
                            children: null
                          "SubjectRepository.java":
                            type: "file"
                            info:
                              "size": "472"
                              "last_modified": "2026-01-07T16:01:24.587462662"
                              "mime_type": "text/x-java-source"
                              "extension": ".java"
                            children: null
                          "ExamRepository.java":
                            type: "file"
                            info:
                              "size": "1182"
                              "last_modified": "2026-01-07T16:01:24.591382297"
                              "mime_type": "text/x-java-source"
                              "extension": ".java"
                            children: null
                      "dto":
                        type: null
                        info: null
                        children:
                          "response":
                            type: null
                            info: null
                            children:
                              "UserResponseDTO.java":
                                type: "file"
                                info:
                                  "size": "572"
                                  "last_modified": "2026-01-07T16:01:24.5972372"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "ErrorResponseDTO.java":
                                type: "file"
                                info:
                                  "size": "232"
                                  "last_modified": "2026-01-07T16:01:24.603727624"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "BannerDTO.java":
                                type: "file"
                                info:
                                  "size": "186"
                                  "last_modified": "2026-01-07T16:01:24.609709264"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "WarningDTO.java":
                                type: "file"
                                info:
                                  "size": "332"
                                  "last_modified": "2026-01-07T16:01:24.61629511"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "NewsSummaryDTO.java":
                                type: "file"
                                info:
                                  "size": "305"
                                  "last_modified": "2026-01-07T16:01:24.622502808"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "DashboardDTO.java":
                                type: "file"
                                info:
                                  "size": "207"
                                  "last_modified": "2026-01-07T16:01:24.628744151"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "SubjectResponseDTO.java":
                                type: "file"
                                info:
                                  "size": "569"
                                  "last_modified": "2026-01-07T16:01:24.634343437"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "ExamResponseDTO.java":
                                type: "file"
                                info:
                                  "size": "952"
                                  "last_modified": "2026-01-07T16:01:24.639749158"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "ExamWithoutSubjectDTO.java":
                                type: "file"
                                info:
                                  "size": "246"
                                  "last_modified": "2026-01-07T16:01:24.645138471"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "ImageUploadResponseDTO.java":
                                type: "file"
                                info:
                                  "size": "104"
                                  "last_modified": "2026-01-07T16:01:24.650433098"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                          "request":
                            type: null
                            info: null
                            children:
                              "UpdateProfileDTO.java":
                                type: "file"
                                info:
                                  "size": "310"
                                  "last_modified": "2026-01-07T16:01:24.656961816"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "CreateNewsDTO.java":
                                type: "file"
                                info:
                                  "size": "415"
                                  "last_modified": "2026-01-07T16:01:24.662165595"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "UpdateNewsDTO.java":
                                type: "file"
                                info:
                                  "size": "172"
                                  "last_modified": "2026-01-07T16:01:24.668023458"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "CreateBannerDTO.java":
                                type: "file"
                                info:
                                  "size": "308"
                                  "last_modified": "2026-01-07T16:01:24.673384231"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "ReorderBannersDTO.java":
                                type: "file"
                                info:
                                  "size": "264"
                                  "last_modified": "2026-01-07T16:01:24.678501145"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "CreateWarningDTO.java":
                                type: "file"
                                info:
                                  "size": "475"
                                  "last_modified": "2026-01-07T16:01:24.683784725"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "UpdateWarningDTO.java":
                                type: "file"
                                info:
                                  "size": "298"
                                  "last_modified": "2026-01-07T16:01:24.688904467"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "UpdateBannerDTO.java":
                                type: "file"
                                info:
                                  "size": "239"
                                  "last_modified": "2026-01-07T16:01:24.693926536"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "CreateSubjectDTO.java":
                                type: "file"
                                info:
                                  "size": "315"
                                  "last_modified": "2026-01-07T16:01:24.699059506"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "CreateExamDTO.java":
                                type: "file"
                                info:
                                  "size": "569"
                                  "last_modified": "2026-01-07T16:01:24.704245053"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "UpdateExamDTO.java":
                                type: "file"
                                info:
                                  "size": "278"
                                  "last_modified": "2026-01-07T16:01:24.709368603"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                      "service":
                        type: null
                        info: null
                        children:
                          "UserService.java":
                            type: "file"
                            info:
                              "size": "3657"
                              "last_modified": "2026-01-07T16:01:24.717197058"
                              "mime_type": "text/x-java-source"
                              "extension": ".java"
                            children: null
                          "BannerService.java":
                            type: "file"
                            info:
                              "size": "4501"
                              "last_modified": "2026-01-07T16:01:24.722309227"
                              "mime_type": "text/x-java-source"
                              "extension": ".java"
                            children: null
                          "WarningService.java":
                            type: "file"
                            info:
                              "size": "3852"
                              "last_modified": "2026-01-07T16:01:24.727265923"
                              "mime_type": "text/x-java-source"
                              "extension": ".java"
                            children: null
                          "NewsService.java":
                            type: "file"
                            info:
                              "size": "4162"
                              "last_modified": "2026-01-07T16:01:24.732533465"
                              "mime_type": "text/x-java-source"
                              "extension": ".java"
                            children: null
                          "ImgBBService.java":
                            type: "file"
                            info:
                              "size": "8253"
                              "last_modified": "2026-01-07T16:01:24.737998828"
                              "mime_type": "text/x-java-source"
                              "extension": ".java"
                            children: null
                          "SubjectService.java":
                            type: "file"
                            info:
                              "size": "2006"
                              "last_modified": "2026-01-07T16:01:24.743336893"
                              "mime_type": "text/x-java-source"
                              "extension": ".java"
                            children: null
                          "ExamService.java":
                            type: "file"
                            info:
                              "size": "3715"
                              "last_modified": "2026-01-07T16:01:24.748646679"
                              "mime_type": "text/x-java-source"
                              "extension": ".java"
                            children: null
                      "controller":
                        type: null
                        info: null
                        children:
                          "privateController":
                            type: null
                            info: null
                            children:
                              "UserController.java":
                                type: "file"
                                info:
                                  "size": "1233"
                                  "last_modified": "2026-01-07T16:01:24.755514874"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                          "publicController":
                            type: null
                            info: null
                            children:
                              "HomeController.java":
                                type: "file"
                                info:
                                  "size": "1682"
                                  "last_modified": "2026-01-07T16:01:24.762068159"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "ExamController.java":
                                type: "file"
                                info:
                                  "size": "1346"
                                  "last_modified": "2026-01-07T16:01:24.767609622"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                          "admin":
                            type: null
                            info: null
                            children:
                              "HomeAdminController.java":
                                type: "file"
                                info:
                                  "size": "6446"
                                  "last_modified": "2026-01-07T16:01:24.774311897"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "ExamAdminController.java":
                                type: "file"
                                info:
                                  "size": "3535"
                                  "last_modified": "2026-01-07T16:01:24.780035531"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                              "ImageAdminController.java":
                                type: "file"
                                info:
                                  "size": "1243"
                                  "last_modified": "2026-01-07T16:01:24.783658841"
                                  "mime_type": "text/x-java-source"
                                  "extension": ".java"
                                children: null
                      "exception":
                        type: null
                        info: null
                        children:
                          "GlobalExceptionHandler.java":
                            type: "file"
                            info:
                              "size": "3929"
                              "last_modified": "2026-01-07T16:01:24.789618299"
                              "mime_type": "text/x-java-source"
                              "extension": ".java"
                            children: null
                          "ResourceNotFoundException.java":
                            type: "file"
                            info:
                              "size": "192"
                              "last_modified": "2026-01-07T16:01:24.792796435"
                              "mime_type": "text/x-java-source"
                              "extension": ".java"
                            children: null
                          "BusinessRuleException.java":
                            type: "file"
                            info:
                              "size": "185"
                              "last_modified": "2026-01-07T16:01:24.795918104"
                              "mime_type": "text/x-java-source"
                              "extension": ".java"
                            children: null
  "test":
    type: null
    info: null
    children:
      "java":
        type: null
        info: null
        children:
          "com":
            type: null
            info: null
            children:
              "caco":
                type: null
                info: null
                children:
                  "sitedocaco":
                    type: null
                    info: null
                    children:
                      "SitedocacoApplicationTests.java":
                        type: "file"
                        info:
                          "size": "215"
                          "last_modified": "2026-01-07T16:01:24.807359346"
                          "mime_type": "text/x-java-source"
                          "extension": ".java"
                        children: null
files:
- path: "main/resources/application.properties.example"
  content: "spring.application.name=sitedocaco\n\n# App:\napp.frontend.url=http://localhost:3000\n\
    \n# Database\nspring.datasource.url=\nspring.datasource.username=\nspring.datasource.password=\n\
    spring.jpa.hibernate.ddl-auto=update\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n\
    spring.jpa.show-sql=true\n\n# JWT\njwt.secret=\njwt.expiration=86400000\n\n# ImgBB\n\
    imgbb.api.key=\nimgbb.upload.url=https://api.imgbb.com/1/upload\n\n# Upload Limits\n\
    spring.servlet.multipart.max-file-size=10MB\nspring.servlet.multipart.max-request-size=10MB\n\
    spring.servlet.multipart.enabled=true\n\n# Timeouts (importante para uploads grandes)\n\
    server.servlet.connection-timeout=30s\nspring.mvc.async.request-timeout=30s\n\n\
    # Email\nspring.mail.host=smtp.gmail.com\nspring.mail.port=587\n#spring.mail.username=\n\
    #spring.mail.password=\nspring.mail.properties.mail.smtp.auth=true\nspring.mail.properties.mail.smtp.starttls.enable=true"
  info:
    "size": "882"
    "last_modified": "2026-01-07T16:01:23.998321772"
    "mime_type": "text/plain"
    "extension": ".example"
- path: "main/resources/application.properties"
  content: "spring.application.name=sitedocaco\nserver.port=8080\n\n# App:\napp.frontend.url=http://localhost:5173\n\
    \n# Database\nspring.datasource.url=jdbc:mysql://127.0.0.1:3306/sitedocaco_dev?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC\n\
    spring.datasource.username=genazemildo\nspring.datasource.password=201190abC=M\n\
    spring.jpa.hibernate.ddl-auto=update\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n\
    spring.jpa.show-sql=true\n\n# oAuth2:\n# === Configuração OAuth2 (Google) ===\n\
    spring.security.oauth2.client.registration.google.client-id=1001582761088-ohb86q8gr6j8tpm6lc1dkkp2agjc390c.apps.googleusercontent.com\n\
    spring.security.oauth2.client.registration.google.client-secret=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\n\
    spring.security.oauth2.client.registration.google.scope=profile,email,address,phone\n\
    spring.security.oauth2.client.registration.google.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}\n\
    spring.security.oauth2.client.registration.google.client-name=Site do CACo\n\n\
    # JWT\njwt.secret=12345678901234567890123456789012\njwt.expiration=86400000\n\n\
    # ImgBB\nimgbb.api.key=a2ae157aa5fb6b031876b14f266ce06d\nimgbb.api.url=https://api.imgbb.com/1/upload\n\
    \n# Upload Limits\nspring.servlet.multipart.max-file-size=15MB\nspring.servlet.multipart.max-request-size=15MB\n\
    spring.servlet.multipart.enabled=true\n\n# Timeouts (importante para uploads grandes)\n\
    server.servlet.connection-timeout=30s\nspring.mvc.async.request-timeout=30s\n\n\
    # Email\nspring.mail.host=smtp.gmail.com\nspring.mail.port=587\n#spring.mail.username=\n\
    #spring.mail.password=\nspring.mail.properties.mail.smtp.auth=true\nspring.mail.properties.mail.smtp.starttls.enable=true"
  info:
    "size": "1636"
    "last_modified": "2026-01-07T16:01:24.081979099"
    "mime_type": "text/x-java-properties"
    "extension": ".properties"
- path: "main/java/com/caco/sitedocaco/SitedocacoApplication.java"
  content: "package com.caco.sitedocaco;\n\nimport org.springframework.boot.SpringApplication;\n\
    import org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\n\
    public class SitedocacoApplication {\n\n\tpublic static void main(String[] args)\
    \ {\n\t\tSpringApplication.run(SitedocacoApplication.class, args);\n\t}\n\n}\n"
  info:
    "size": "320"
    "last_modified": "2026-01-07T16:01:24.129818192"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/config/SecurityConfig.java"
  content: "package com.caco.sitedocaco.config;\n\nimport com.caco.sitedocaco.security.jwt.JwtAuthenticationFilter;\n\
    import com.caco.sitedocaco.security.oauth2.CustomOAuth2UserService;\nimport com.caco.sitedocaco.security.oauth2.OAuth2LoginFailureHandler;\n\
    import com.caco.sitedocaco.security.oauth2.OAuth2LoginSuccessHandler;\nimport\
    \ lombok.RequiredArgsConstructor;\nimport org.springframework.beans.factory.annotation.Value;\n\
    import org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\
    import org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;\n\
    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\n\
    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\n\
    import org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;\n\
    import org.springframework.security.config.http.SessionCreationPolicy;\nimport\
    \ org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\n\
    import org.springframework.web.cors.CorsConfiguration;\nimport org.springframework.web.cors.CorsConfigurationSource;\n\
    import org.springframework.web.cors.UrlBasedCorsConfigurationSource;\n\nimport\
    \ java.util.List;\n\n@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity\
    \ // Permite usar @PreAuthorize nos controllers\n@RequiredArgsConstructor\npublic\
    \ class SecurityConfig {\n\n    private final CustomOAuth2UserService customOAuth2UserService;\n\
    \    private final OAuth2LoginSuccessHandler oAuth2LoginSuccessHandler;\n    private\
    \ final OAuth2LoginFailureHandler oAuth2LoginFailureHandler;\n    private final\
    \ JwtAuthenticationFilter jwtAuthenticationFilter;\n\n    // Frontend URL from\
    \ application.properties:\n    @Value(\"${app.frontend.url}\")\n    private String\
    \ frontendUrl;\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity\
    \ http) throws Exception {\n        http\n                // 1. Desabilita CSRF\
    \ (API Stateless não precisa)\n                .csrf(AbstractHttpConfigurer::disable)\n\
    \n                // 2. Configura CORS (Para o React acessar)\n              \
    \  .cors(cors -> cors.configurationSource(corsConfigurationSource()))\n\n    \
    \            // 3. Define Sessão como Stateless (Não guarda JSESSIONID)\n    \
    \            .sessionManagement(session -> session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n\
    \n                // 4. Regras de Autorização de URL\n                .authorizeHttpRequests(auth\
    \ -> auth\n                        // Rotas Públicas\n                       \
    \ .requestMatchers(\"/api/public/**\").permitAll()\n                        .requestMatchers(\"\
    /swagger-ui/**\", \"/v3/api-docs/**\").permitAll() // Docs\n\n               \
    \         // Rotas Admin\n                        .requestMatchers(\"/api/admin/**\"\
    ).hasRole(\"ADMIN\")\n                        .anyRequest().authenticated()\n\
    \                )\n\n                // 5. Configuração do Login com Google (OAuth2)\n\
    \                .oauth2Login(oauth2 -> oauth2\n                        // Serviç\
    o que processa o usuário vindo do Google\n                        .userInfoEndpoint(userInfo\
    \ -> userInfo\n                                .userService(customOAuth2UserService)\n\
    \                        )\n                        // Handler executado após\
    \ login com sucesso (Gera JWT e redireciona)\n                        .successHandler(oAuth2LoginSuccessHandler)\n\
    \                        .failureHandler(oAuth2LoginFailureHandler)\n        \
    \        )\n\n                // 6. Adiciona o filtro JWT antes do filtro padrã\
    o do Spring\n                .addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);\n\
    \n        return http.build();\n    }\n\n    @Bean\n    public CorsConfigurationSource\
    \ corsConfigurationSource() {\n        CorsConfiguration configuration = new CorsConfiguration();\n\
    \        configuration.setAllowedOrigins(List.of(frontendUrl));\n        configuration.setAllowedMethods(List.of(\"\
    GET\", \"POST\", \"PUT\", \"DELETE\", \"OPTIONS\"));\n        configuration.setAllowedHeaders(List.of(\"\
    Authorization\", \"Content-Type\"));\n        configuration.setAllowCredentials(true);\n\
    \n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n\
    \        source.registerCorsConfiguration(\"/**\", configuration);\n        return\
    \ source;\n    }\n}"
  info:
    "size": "4365"
    "last_modified": "2026-01-07T16:01:24.158580434"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/config/ImgBBConfig.java"
  content: "// main/java/com/caco/sitedocaco/config/ImgBBConfig.java\npackage com.caco.sitedocaco.config;\n\
    \nimport lombok.Getter;\nimport org.springframework.beans.factory.annotation.Value;\n\
    import org.springframework.context.annotation.Configuration;\n\n@Getter\n@Configuration\n\
    public class ImgBBConfig {\n\n    @Value(\"${imgbb.api.key}\")\n    private String\
    \ apiKey;\n\n    @Value(\"${imgbb.api.url:https://api.imgbb.com/1/upload}\")\n\
    \    private String apiUrl;\n\n}"
  info:
    "size": "438"
    "last_modified": "2026-01-07T16:01:24.189871467"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/User.java"
  content: "package com.caco.sitedocaco.entity;\n\nimport com.caco.sitedocaco.entity.enums.Role;\n\
    import jakarta.persistence.*;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\n\
    import lombok.Data;\nimport org.hibernate.annotations.CreationTimestamp;\nimport\
    \ org.springframework.aot.generate.GeneratedMethod;\n\nimport java.time.LocalDateTime;\n\
    import java.util.UUID;\n\n@Entity\n@Data\n@Table\npublic class User {\n    /*\n\
    \    * 1. **`User`**\n        - `Long id` (PK, Identity)\n        - `String email`\
    \ (Unique, Not Null)\n        - `String username` (Not Null)\n        - `String\
    \ avatarUrl`\n        - `Role role` (Enum: `STUDENT`, `ADMIN`, `EDITOR`)\n   \
    \     - `LocalDateTime createdAt`\n    */\n\n    @Id\n    @GeneratedValue(strategy\
    \ = GenerationType.UUID)\n    private UUID id;\n\n    @Column(unique = true, nullable\
    \ = false)\n    private String email;\n\n    @Column(nullable = false, length\
    \ = 50)\n    private String username;\n\n    private String avatarUrl;\n\n   \
    \ @Enumerated(EnumType.STRING)\n    private Role role = Role.STUDENT;\n\n    @CreationTimestamp\n\
    \    @Column(updatable = false)\n    private LocalDateTime createdAt;\n}\n"
  info:
    "size": "1105"
    "last_modified": "2026-01-07T16:01:24.227504854"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/home/Banner.java"
  content: "package com.caco.sitedocaco.entity.home;\n\nimport jakarta.persistence.*;\n\
    import lombok.Data;\n\nimport java.util.UUID;\n\n@Table\n@Entity\n@Data\npublic\
    \ class Banner {\n    /*\n    1. **`Banner`**\n        - `UUID id`\n        -\
    \ `String title`\n        - `String imageUrl`\n        - `String targetLink`\n\
    \        - `Integer displayOrder`\n        - `Boolean active`\n    * */\n\n  \
    \  @Id\n    @GeneratedValue(strategy = GenerationType.UUID)\n    private UUID\
    \ id;\n    private String title;\n    private String imageUrl;\n    private String\
    \ targetLink;\n    private Integer displayOrder;\n    private Boolean active;\n\
    }\n"
  info:
    "size": "591"
    "last_modified": "2026-01-07T16:01:24.250036825"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/home/Warning.java"
  content: "package com.caco.sitedocaco.entity.home;\n\nimport com.caco.sitedocaco.entity.enums.SeverityLevel;\n\
    import jakarta.persistence.*;\nimport lombok.Data;\n\nimport java.time.LocalDateTime;\n\
    import java.util.UUID;\n\n@Entity\n@Data\n@Table\npublic class Warning {\n   \
    \ /*\n    2. `Warning` (Avisos)\n        - `UUID id`\n        - `String markdownText`\n\
    \        - `SeverityLevel severityLevel` (ENUM: LOW, MEDIUM, HIGH, CRITICAL) [default:\
    \ MEDIUM]\n        - `LocalDateTime startsAt`\n        - `LocalDateTime expiresAt`\n\
    \    */\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.UUID)\n    private\
    \ UUID id;\n\n    @Column(columnDefinition = \"TEXT\", nullable = false)\n   \
    \ private String markdownText;\n\n    @Enumerated(EnumType.STRING)\n    SeverityLevel\
    \ severityLevel = SeverityLevel.MEDIUM;\n\n    @Column(nullable = false)\n   \
    \ private LocalDateTime startsAt;\n\n    @Column(nullable = false)\n    private\
    \ LocalDateTime expiresAt;\n}\n"
  info:
    "size": "905"
    "last_modified": "2026-01-07T16:01:24.27246621"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/home/News.java"
  content: "package com.caco.sitedocaco.entity.home;\n\nimport com.caco.sitedocaco.entity.User;\n\
    import jakarta.persistence.*;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\n\
    import lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.time.LocalDateTime;\n\
    import java.util.UUID;\n\n@Entity\n@Table\n@Data\n@Builder\n@NoArgsConstructor\n\
    @AllArgsConstructor\npublic class News {\n    /*\n    3. **`News`**\n        -\
    \ `UUID id`\n        - `String title`\n        - `String slug` (Unique, indexado)\n\
    \        - `String summary` (Max 255 chars)\n        - `String content` (TEXT/CLOB\
    \ - Markdown)\n        - `String coverImage`\n        - `User author` (ManyToOne)\n\
    \        - `LocalDateTime publishDate`\n    */\n\n    @Id\n    @GeneratedValue(strategy\
    \ = GenerationType.UUID)\n    private UUID id;\n\n    @Column(nullable = false)\n\
    \    private String title;\n\n    @Column(nullable = false, unique = true)\n \
    \   private String slug;\n\n    @Column(length = 255)\n    private String summary;\n\
    \n    @Lob\n    private String content;\n\n    private String coverImage;\n\n\
    \    @ManyToOne\n    private User author;\n\n    private LocalDateTime publishDate;\n\
    }\n"
  info:
    "size": "1103"
    "last_modified": "2026-01-07T16:01:24.294334229"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/event/Event.java"
  content: "package com.caco.sitedocaco.entity.event;\n\nimport jakarta.persistence.*;\n\
    import lombok.Data;\n\nimport java.util.UUID;\n\n@Entity\n@Table\n@Data\npublic\
    \ class Event {\n    /*\n    1. **`Event`**\n        - `UUID id`\n        - `String\
    \ title`\n        - `String description` (Markdown)\n        - `LocalDateTime\
    \ startDate`\n        - `LocalDateTime endDate`\n        - `String location`\n\
    \        - `String coverImage`\n        - `EventType type` (Enum: `CACO`, `IC`,\
    \ `FERIADO`)\n        - `EventImportance importance` (Enum: `MAJOR`, `MINOR`)\n\
    \            - *Regra:* `MAJOR` = Tem página própria. `MINOR` = Só modal.\n  \
    \      - `EventStatus status` (Enum: `SCHEDULED`, `HAPPENING`, `ENDED`)\n    */\n\
    \n    public enum EventType {\n        CACO,\n        IC,\n        FERIADO\n \
    \   }\n\n    public enum EventImportance {\n        MAJOR,\n        MINOR\n  \
    \  }\n\n    public enum EventStatus {\n        SCHEDULED,\n        HAPPENING,\n\
    \        ENDED\n    }\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.UUID)\n\
    \    private UUID id;\n\n    private String title;\n    @Lob\n    private String\
    \ description;\n    private java.time.LocalDateTime startDate;\n    private java.time.LocalDateTime\
    \ endDate;\n    private String location;\n    private String coverImage;\n\n \
    \   @Enumerated(EnumType.STRING)\n    private EventType type;\n\n    @Enumerated(EnumType.STRING)\n\
    \    private EventImportance importance;\n\n    @Enumerated(EnumType.STRING)\n\
    \    private EventStatus status;\n}\n"
  info:
    "size": "1422"
    "last_modified": "2026-01-07T16:01:24.353833089"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/event/EventGalleryItem.java"
  content: "package com.caco.sitedocaco.entity.event;\n\nimport jakarta.persistence.*;\n\
    import lombok.Data;\n\nimport java.util.UUID;\n\n@Entity\n@Table\n@Data\npublic\
    \ class EventGalleryItem {\n    /*\n    2. **`EventGalleryItem`**\n        - `UUID\
    \ id`\n        - `Event event` (ManyToOne)\n        - `String mediaUrl`\n    \
    \    - `MediaType type` (Enum: `IMAGE`, `VIDEO`)\n    */\n\n    public enum MediaType\
    \ {\n        IMAGE,\n        VIDEO\n    }\n\n    @Id\n    @GeneratedValue(strategy\
    \ = GenerationType.UUID)\n    private UUID id;\n\n    @ManyToOne\n    Event event;\n\
    \n    private String mediaUrl;\n\n    @Enumerated(EnumType.STRING)\n    private\
    \ MediaType type;\n}\n"
  info:
    "size": "624"
    "last_modified": "2026-01-07T16:01:24.369607837"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/manual/ManualCategory.java"
  content: "package com.caco.sitedocaco.entity.manual;\n\nimport jakarta.persistence.*;\n\
    import lombok.Data;\n\nimport java.util.List;\nimport java.util.UUID;\n\n@Entity\n\
    @Table\n@Data\npublic class ManualCategory {\n    /*\n    1. **`ManualCategory`**\n\
    \        - `UUID id`\n        - `String slug` (unique, URL-friendly)\n       \
    \ - `String title`\n        - `Integer order`\n        - `List<ManualChapter>\
    \ chapters` (OneToMany)\n    */\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.UUID)\n\
    \    private UUID id;\n\n    @Column(nullable = false, unique = true)\n    private\
    \ String slug;\n\n    @Column(nullable = false)\n    private String title;\n\n\
    \    @Column(name = \"category_order\")\n    private Integer order;\n\n    @OneToMany(mappedBy\
    \ = \"category\", cascade = CascadeType.ALL, orphanRemoval = true)\n    private\
    \ List<ManualChapter> chapters;\n}\n"
  info:
    "size": "813"
    "last_modified": "2026-01-07T16:01:24.389369669"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/manual/ManualChapter.java"
  content: "package com.caco.sitedocaco.entity.manual;\n\nimport jakarta.persistence.*;\n\
    import lombok.Data;\n\nimport java.util.List;\nimport java.util.UUID;\n\n@Entity\n\
    @Table\n@Data\npublic class ManualChapter {\n    /*\n    2. **`ManualChapter`**\n\
    \        - `UUID id`\n        - `String slug` (unique, URL-friendly)\n       \
    \ - `String title`\n        - `Integer order`\n        - `ManualCategory category`\
    \ (ManyToOne)\n        - `List<ManualArticle> articles` (OneToMany)\n    */\n\n\
    \    @Id\n    @GeneratedValue(strategy = GenerationType.UUID)\n    private UUID\
    \ id;\n\n    @Column(nullable = false, unique = true)\n    private String slug;\n\
    \n    @Column(nullable = false)\n    private String title;\n\n    @Column(name\
    \ = \"chapter_order\")\n    private Integer order;\n\n    @ManyToOne\n    private\
    \ ManualCategory category;\n\n    @OneToMany(mappedBy = \"chapter\", cascade =\
    \ CascadeType.ALL, orphanRemoval = true)\n    private List<ManualArticle> articles;\n\
    }\n"
  info:
    "size": "910"
    "last_modified": "2026-01-07T16:01:24.409065168"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/manual/ManualArticle.java"
  content: "package com.caco.sitedocaco.entity.manual;\n\nimport jakarta.persistence.*;\n\
    import lombok.Data;\n\nimport java.util.UUID;\n\n@Entity\n@Table\n@Data\npublic\
    \ class ManualArticle {\n    /*\n    3. **`ManualArticle`**\n        - `UUID id`\n\
    \        - `String slug` (unique, URL-friendly)\n        - `String title`\n  \
    \      - `String content` (TEXT - Markdown)\n        - `Integer order`\n     \
    \   - `ManualChapter chapter` (ManyToOne)\n    */\n\n    @Id\n    @GeneratedValue(strategy\
    \ = GenerationType.UUID)\n    private UUID id;\n\n    @Column(nullable = false,\
    \ unique = true)\n    private String slug;\n\n    @Column(nullable = false)\n\
    \    private String title;\n\n    @Lob\n    private String content;\n\n    @Column(name\
    \ = \"article_order\")\n    private Integer order;\n\n    @ManyToOne\n    private\
    \ ManualChapter chapter;\n}\n"
  info:
    "size": "784"
    "last_modified": "2026-01-07T16:01:24.430838065"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/manual/ArticleFeedback.java"
  content: "package com.caco.sitedocaco.entity.manual;\n\nimport com.caco.sitedocaco.entity.User;\n\
    import jakarta.persistence.*;\nimport lombok.Data;\n\nimport java.time.LocalDateTime;\n\
    import java.util.UUID;\n\n@Entity\n@Table\n@Data\npublic class ArticleFeedback\
    \ {\n    /*\n    4. **`ArticleFeedback`**\n        - `UUID id`\n        - `ManualArticle\
    \ article` (ManyToOne)\n        - `User user` (ManyToOne, Nullable)\n        -\
    \ `Boolean isHelpful`\n        - `String comment` (Nullable)\n        - `LocalDateTime\
    \ postedAt`\n    */\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.UUID)\n\
    \    private UUID id;\n\n    @ManyToOne\n    private ManualArticle article;\n\n\
    \    @ManyToOne\n    private User user;\n\n    private Boolean isHelpful;\n\n\
    \    private String comment;\n\n    private LocalDateTime postedAt;\n}\n"
  info:
    "size": "771"
    "last_modified": "2026-01-07T16:01:24.44279969"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/exam/Exam.java"
  content: "package com.caco.sitedocaco.entity.exam;\n\nimport com.caco.sitedocaco.entity.enums.ExamType;\n\
    import jakarta.persistence.*;\nimport lombok.Data;\n\nimport java.util.UUID;\n\
    \n@Entity\n@Table\n@Data\npublic class Exam {\n    /*\n    1. **`Exam`**\n   \
    \     - `UUID id`\n        - `Subject subject` (Disciplina, ManyToOne)\n     \
    \   - `Integer year`\n        - `ExamType type` (Enum: `P1`, `P2`, `P3`, `EXAME`,\
    \ `SUB`, `OUTROS`)\n        - `String fileUrl`\n    */\n\n    @Id\n    @GeneratedValue(strategy\
    \ = GenerationType.UUID)\n    private UUID id;\n\n    @ManyToOne\n    @JoinColumn(name\
    \ = \"subject_code\", nullable = false)\n    private Subject subject;\n\n    private\
    \ Integer year;\n    @Enumerated(EnumType.STRING)\n    private ExamType type;\n\
    \n    @Column(nullable = false)\n    private String fileUrl;\n}\n"
  info:
    "size": "773"
    "last_modified": "2026-01-07T16:01:24.454851678"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/exam/Subject.java"
  content: "package com.caco.sitedocaco.entity.exam;\n\nimport jakarta.persistence.*;\n\
    import lombok.Data;\n\nimport java.util.UUID;\n\n@Entity\n@Table\n@Data\npublic\
    \ class Subject {\n    /*\n    2. `Subject`\n        - `String subjectCode` (Có\
    digo da disciplina, ex: \"MC102\", \"F159\", etc) [PK]\n        - `String name`\n\
    \    */\n\n    @Id\n    @Column(nullable = false, unique = true)\n    private\
    \ String subjectCode;\n\n    @Column(nullable = false, unique = true)\n    private\
    \ String name;\n}\n"
  info:
    "size": "461"
    "last_modified": "2026-01-07T16:01:24.464674902"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/sticker/Sticker.java"
  content: "package com.caco.sitedocaco.entity.sticker;\n\nimport com.caco.sitedocaco.entity.event.Event;\n\
    import jakarta.persistence.*;\nimport lombok.Data;\n\nimport java.util.UUID;\n\
    \n@Entity\n@Table\n@Data\npublic class Sticker {\n    /*\n    1. **`Sticker`**\n\
    \        - `UUID id`\n        - `String name`\n        - `String description`\n\
    \        - `String imageUrl`\n        - `Event originEvent` (OneToOne Nullable)\n\
    \    */\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.UUID)\n    private\
    \ UUID id;\n\n    @Column(nullable = false, unique = true)\n    private String\
    \ name;\n\n    @Column(length = 600)\n    private String description;\n\n    @Column(nullable\
    \ = false)\n    private String imageUrl;\n\n    @ManyToOne\n    private Event\
    \ originEvent;\n}\n"
  info:
    "size": "720"
    "last_modified": "2026-01-07T16:01:24.472010465"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/sticker/UserSticker.java"
  content: "package com.caco.sitedocaco.entity.sticker;\n\nimport com.caco.sitedocaco.entity.User;\n\
    import jakarta.persistence.*;\nimport lombok.Data;\n\nimport java.time.LocalDateTime;\n\
    import java.util.UUID;\n\n@Data\n@Entity\n@Table\npublic class UserSticker {\n\
    \    /*\n    1. **`UserSticker`**\n        - `UUID id`\n        - `User user`\
    \ (ManyToOne)\n        - `Sticker sticker` (ManyToOne)\n        - `LocalDateTime\
    \ obtainedAt`\n    */\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.UUID)\n\
    \    private UUID id;\n\n    @ManyToOne\n    private User user;\n\n    @ManyToOne\n\
    \    private Sticker sticker;\n\n    private LocalDateTime obtainedAt;\n}\n"
  info:
    "size": "617"
    "last_modified": "2026-01-07T16:01:24.478389953"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/sticker/RedemptionCode.java"
  content: "package com.caco.sitedocaco.entity.sticker;\n\nimport jakarta.persistence.*;\n\
    import lombok.Data;\n\nimport java.time.LocalDateTime;\n\n@Data\n@Entity\n@Table\n\
    public class RedemptionCode {\n    /*\n    2. **`RedemptionCode`**\n    - `String\
    \ code` (PK, String aleatória de 8-12 chars)\n    - `Sticker sticker` (ManyToOne)\n\
    \    - `Boolean isOneTimeUse`\n    - `Boolean isUsed`\n    - `LocalDateTime expiresAt`\
    \ (Nullable)\n    */\n\n    @Id\n    @Column(length = 12)\n    private String\
    \ code;\n\n    @ManyToOne\n    private Sticker sticker;\n\n    private Boolean\
    \ isOneTimeUse;\n    private Boolean isUsed;\n    private LocalDateTime expiresAt;\n\
    }\n"
  info:
    "size": "617"
    "last_modified": "2026-01-07T16:01:24.484009291"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/AnalyticsLog.java"
  content: "package com.caco.sitedocaco.entity;\n\nimport jakarta.persistence.*;\n\
    import lombok.Data;\n\nimport java.util.UUID;\n\n@Data\n@Entity\n@Table\npublic\
    \ class AnalyticsLog {\n    /*\n    1. **`AnalyticsLog`**\n        - `UUID id`\n\
    \        - `AnalyticsType type` (Enum: `VIEW_ARTICLE`, `VIEW_EVENT`, `SEARCH_QUERY`)\n\
    \        - `String targetId` (Pode ser ID do artigo ou o termo buscado)\n    \
    \    - `LocalDateTime timestamp`\n    */\n    public enum AnalyticsType {\n  \
    \      VIEW_ARTICLE,\n        VIEW_EVENT,\n        SEARCH_QUERY\n    }\n\n   \
    \ @Id\n    @GeneratedValue(strategy = GenerationType.UUID)\n    private UUID id;\n\
    \n    @Enumerated(EnumType.STRING)\n    private AnalyticsType type;\n\n    private\
    \ String targetId;\n}\n"
  info:
    "size": "693"
    "last_modified": "2026-01-07T16:01:24.491249078"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/store/Product.java"
  content: "package com.caco.sitedocaco.entity.store;\n\nimport jakarta.persistence.*;\n\
    import lombok.Data;\n\nimport java.util.UUID;\n\n@Data\n@Entity\n@Table\npublic\
    \ class Product {\n    /*\n    1. **`Product`**\n        - `UUID id`\n       \
    \ - `String name` (ex: \"Moletom do Curso 2026\")\n        - `String description`\
    \ (Markdown)\n        - `Integer price` (em centavos, ex: 5999 para R$59,99)\n\
    \        - `String coverImage`\n        - `List<String> galleryImages` (ElementCollection\
    \ ou tabela separada)\n        - `ProductStatus status` (Enum: `AVAILABLE`, `OUT_OF_STOCK`,\
    \ `PRE_ORDER`)\n        - `ProductCategory category` (Enum ou Entidade: `ROUPAS`,\
    \ `CANECAS`, `ADESIVOS_FISICOS`, `OUTROS`)\n    */\n\n    public enum ProductStatus\
    \ {\n        AVAILABLE,\n        OUT_OF_STOCK,\n        PRE_ORDER\n    }\n\n \
    \   @Id\n    @GeneratedValue(strategy = GenerationType.UUID)\n    private UUID\
    \ id;\n\n    @Column(nullable = false)\n    private String name;\n\n    @Column(columnDefinition\
    \ = \"TEXT\")\n    private String description;\n\n    @Column(nullable = false)\n\
    \    private java.math.BigDecimal price;\n\n    private String coverImage;\n\n\
    \    @ElementCollection\n    @CollectionTable(name = \"product_gallery_images\"\
    , joinColumns = @JoinColumn(name = \"product_id\"))\n    @Column(name = \"image_url\"\
    )\n    private java.util.List<String> galleryImages;\n\n    @Enumerated(EnumType.STRING)\n\
    \    @Column(nullable = false)\n    private ProductStatus status;\n\n    @Column(nullable\
    \ = false)\n    private String category;\n}\n"
  info:
    "size": "1452"
    "last_modified": "2026-01-07T16:01:24.49903818"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/store/ProductVariation.java"
  content: "package com.caco.sitedocaco.entity.store;\n\nimport jakarta.persistence.*;\n\
    import lombok.Data;\n\n@Data\n@Entity\n@Table\npublic class ProductVariation {\n\
    \    /*\n    2. **`ProductVariation`**\n        - `UUID id`\n        - `Product\
    \ product` (ManyToOne)\n        - `String name` (ex: \"Tamanho P\", \"Tamanho\
    \ G\")\n        - `Integer additionalPrice` (em centavos, ex: 5999 para R$59,99)\n\
    \        - `Integer stockQuantity`\n    * */\n\n    @Id\n    @GeneratedValue(strategy\
    \ = GenerationType.UUID)\n    private java.util.UUID id;\n\n    @ManyToOne\n \
    \   private Product product;\n\n    private String name;\n\n    private Integer\
    \ additionalPrice;\n\n    private Integer stockQuantity;\n}\n"
  info:
    "size": "654"
    "last_modified": "2026-01-07T16:01:24.50625237"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/enums/Role.java"
  content: "package com.caco.sitedocaco.entity.enums;\n\npublic enum Role {\n    STUDENT,\n\
    \    ADMIN,\n    EDITOR\n}\n"
  info:
    "size": "99"
    "last_modified": "2026-01-07T16:01:24.513711651"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/enums/ImageType.java"
  content: "package com.caco.sitedocaco.entity.enums;\n\nimport lombok.Getter;\n\n\
    @Getter\npublic enum ImageType {\n    PROFILE_AVATAR(\"avatar\", 1, 1, 1024, 1024,\
    \ 2 * 1024 * 1024), // 2MB max\n    BANNER_IMAGE(\"banner\", 21, 9, 1920, 822,\
    \ 8 * 1024 * 1024), // 8MB max\n    EVENT_COVER(\"event\", 4, 3, 1200, 900, 8\
    \ * 1024 * 1024), // 8MB max\n    NEWS_COVER(\"news\", 3, 2, 1200, 800, 5 * 1024\
    \ * 1024); // 5MB max\n\n    private final String folderName;\n    private final\
    \ int aspectRatioWidth;\n    private final int aspectRatioHeight;\n    private\
    \ final int maxWidth;\n    private final int maxHeight;\n    private final long\
    \ maxSizeBytes; // Limite em bytes\n\n    ImageType(String folderName, int aspectRatioWidth,\
    \ int aspectRatioHeight,\n              int maxWidth, int maxHeight, long maxSizeBytes)\
    \ {\n        this.folderName = folderName;\n        this.aspectRatioWidth = aspectRatioWidth;\n\
    \        this.aspectRatioHeight = aspectRatioHeight;\n        this.maxWidth =\
    \ maxWidth;\n        this.maxHeight = maxHeight;\n        this.maxSizeBytes =\
    \ maxSizeBytes;\n    }\n\n    public double getAspectRatio() {\n        return\
    \ (double) aspectRatioWidth / aspectRatioHeight;\n    }\n\n    public String getValidationErrorMessage()\
    \ {\n        return String.format(\n                \"Imagem deve ter aspect ratio\
    \ %d:%d e tamanho máximo de %dMB\",\n                aspectRatioWidth, aspectRatioHeight,\
    \ maxSizeBytes / (1024 * 1024)\n        );\n    }\n}"
  info:
    "size": "1394"
    "last_modified": "2026-01-07T16:01:24.519387666"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/enums/SeverityLevel.java"
  content: "package com.caco.sitedocaco.entity.enums;\n\npublic enum SeverityLevel\
    \ {\n    LOW,\n    MEDIUM,\n    HIGH,\n    CRITICAL\n}\n"
  info:
    "size": "117"
    "last_modified": "2026-01-07T16:01:24.524832102"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/entity/enums/ExamType.java"
  content: "package com.caco.sitedocaco.entity.enums;\n\npublic enum ExamType {\n\
    \    P1,\n    P2,\n    P3,\n    EXAME,\n    SUB,\n    OUTROS\n}"
  info:
    "size": "122"
    "last_modified": "2026-01-07T16:01:24.530277166"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/security/oauth2/CustomOAuth2UserService.java"
  content: "package com.caco.sitedocaco.security.oauth2;\n\nimport com.caco.sitedocaco.entity.User;\n\
    import com.caco.sitedocaco.entity.enums.Role;\nimport com.caco.sitedocaco.repository.UserRepository;\n\
    import jakarta.transaction.Transactional;\nimport lombok.RequiredArgsConstructor;\n\
    import org.springframework.security.oauth2.client.userinfo.DefaultOAuth2UserService;\n\
    import org.springframework.security.oauth2.client.userinfo.OAuth2UserRequest;\n\
    import org.springframework.security.oauth2.core.OAuth2AuthenticationException;\n\
    import org.springframework.security.oauth2.core.OAuth2Error;\nimport org.springframework.security.oauth2.core.user.OAuth2User;\n\
    import org.springframework.stereotype.Service;\n\nimport java.time.LocalDateTime;\n\
    import java.util.Optional;\n\n@Service\n@RequiredArgsConstructor\npublic class\
    \ CustomOAuth2UserService extends DefaultOAuth2UserService {\n\n    private final\
    \ UserRepository userRepository;\n\n    @Override\n    @Transactional\n    public\
    \ OAuth2User loadUser(OAuth2UserRequest userRequest) throws OAuth2AuthenticationException\
    \ {\n        OAuth2User oAuth2User = super.loadUser(userRequest);\n\n        System.out.println(\"\
    >>> CustomOAuth2UserService: Recebido do Google: \" + oAuth2User.getAttributes());\
    \ // LOG DE DEBUG\n\n        String email = oAuth2User.getAttribute(\"email\"\
    );\n        String name = oAuth2User.getAttribute(\"name\");\n        String avatarUrl\
    \ = oAuth2User.getAttribute(\"picture\");\n\n        // TODO: Descomentar para\
    \ restringir acesso por domínio de e-mail\n        // REGRA DE NEGÓCIO: Validaç\
    ão de Domínio\n//        assert email != null;\n//        if (!email.endsWith(\"\
    @dac.unicamp.br\")) {\n//            OAuth2Error oauth2Error = new OAuth2Error(\n\
    //                    \"invalid_domain\",\n//                    \"O e-mail nã\
    o pertence ao domínio institucional permitido.\",\n//                    null\n\
    //            );\n//\n//            throw new OAuth2AuthenticationException(oauth2Error,\
    \ oauth2Error.toString());\n//        }\n\n        // Salva ou atualiza o usuá\
    rio\n        Optional<User> userOptional = userRepository.findByEmail(email);\n\
    \n        // Atualiza se existir, senão cria novo\n        if (!userOptional.isPresent())\
    \ {\n            User user = new User();\n            user.setEmail(email);\n\
    \            user.setUsername(name);\n            user.setAvatarUrl(avatarUrl);\n\
    \            user.setRole(Role.STUDENT); // Padrão\n            user.setCreatedAt(LocalDateTime.now());\n\
    \            userRepository.save(user);\n        }\n\n\n        return oAuth2User;\n\
    \    }\n}"
  info:
    "size": "2486"
    "last_modified": "2026-01-07T16:01:24.538796101"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/security/oauth2/OAuth2LoginSuccessHandler.java"
  content: "package com.caco.sitedocaco.security.oauth2;\n\nimport com.caco.sitedocaco.entity.User;\n\
    import com.caco.sitedocaco.repository.UserRepository;\nimport com.caco.sitedocaco.security.jwt.JwtService;\n\
    import jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\n\
    import lombok.RequiredArgsConstructor;\nimport org.springframework.beans.factory.annotation.Value;\n\
    import org.springframework.security.core.Authentication;\nimport org.springframework.security.oauth2.core.user.OAuth2User;\n\
    import org.springframework.security.web.authentication.SimpleUrlAuthenticationSuccessHandler;\n\
    import org.springframework.stereotype.Component;\nimport org.springframework.web.util.UriComponentsBuilder;\n\
    \nimport java.io.IOException;\n\n@Component\n@RequiredArgsConstructor\npublic\
    \ class OAuth2LoginSuccessHandler extends SimpleUrlAuthenticationSuccessHandler\
    \ {\n\n    private final JwtService jwtService;\n    private final UserRepository\
    \ userRepository;\n\n    @Value(\"${app.frontend.url:http://localhost:5173}\"\
    )\n    private String frontendUrl;\n\n    @Override\n    public void onAuthenticationSuccess(HttpServletRequest\
    \ request, HttpServletResponse response, Authentication authentication) throws\
    \ IOException {\n        OAuth2User oAuth2User = (OAuth2User) authentication.getPrincipal();\n\
    \        String email = oAuth2User.getAttribute(\"email\");\n\n        // Busca\
    \ o usuário completo (com Role) para gerar o token\n        User user = userRepository.findByEmail(email)\n\
    \                .orElseThrow(() -> new RuntimeException(\"Usuário não encontrado\
    \ pós-login\"));\n\n        // Gera o token JWT\n        String token = jwtService.generateToken(user);\n\
    \n        // Redireciona para o Front com o token na URL\n        String targetUrl\
    \ = UriComponentsBuilder.fromUriString(frontendUrl + \"/auth/callback\")\n   \
    \             .queryParam(\"token\", token)\n                .queryParam(\"expiresIn\"\
    , jwtService.getExpirationInMillis())\n                .build().toUriString();\n\
    \n        getRedirectStrategy().sendRedirect(request, response, targetUrl);\n\
    \    }\n}"
  info:
    "size": "2037"
    "last_modified": "2026-01-07T16:01:24.543919657"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/security/oauth2/OAuth2LoginFailureHandler.java"
  content: "package com.caco.sitedocaco.security.oauth2;\n\nimport jakarta.servlet.ServletException;\n\
    import jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\n\
    import org.springframework.beans.factory.annotation.Value;\nimport org.springframework.security.core.AuthenticationException;\n\
    import org.springframework.security.oauth2.core.OAuth2AuthenticationException;\n\
    import org.springframework.security.oauth2.core.OAuth2Error;\nimport org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler;\n\
    import org.springframework.stereotype.Component;\nimport org.springframework.web.util.UriComponentsBuilder;\n\
    \nimport java.io.IOException;\n\n@Component\npublic class OAuth2LoginFailureHandler\
    \ extends SimpleUrlAuthenticationFailureHandler {\n\n    @Value(\"${app.frontend.url}\"\
    )\n    private String frontendUrl;\n\n    @Override\n    public void onAuthenticationFailure(HttpServletRequest\
    \ request,\n                                        HttpServletResponse response,\n\
    \                                        AuthenticationException exception) throws\
    \ IOException, ServletException {\n\n        // Pega a mensagem de erro da exceç\
    ão (ou define um código padrão)\n        // Se a exceção for \"invalid_domain\"\
    , mandamos esse código.\n        String errorCode = \"generic_error\";\n\n   \
    \     // 1. Verifica se a exceção é do tipo OAuth2 (que carrega nosso código personalizado)\n\
    \        if (exception instanceof OAuth2AuthenticationException oauthEx) {\n \
    \           OAuth2Error error = oauthEx.getError();\n\n            // 2. Lê o\
    \ código que definimos no Service (\"invalid_domain\")\n            if (error\
    \ != null) {\n                errorCode = error.getErrorCode();\n            }\n\
    \        }\n\n        // Monta a URL: http://localhost:5173/login?error=invalid_domain\n\
    \        String targetUrl = UriComponentsBuilder.fromUriString(frontendUrl + \"\
    /login\")\n                .queryParam(\"error\", errorCode)\n               \
    \ .build().toUriString();\n\n        getRedirectStrategy().sendRedirect(request,\
    \ response, targetUrl);\n    }\n}"
  info:
    "size": "2046"
    "last_modified": "2026-01-07T16:01:24.549238125"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/security/jwt/JwtService.java"
  content: "package com.caco.sitedocaco.security.jwt;\n\nimport com.auth0.jwt.JWT;\n\
    import com.auth0.jwt.algorithms.Algorithm;\nimport com.auth0.jwt.interfaces.DecodedJWT;\n\
    import com.caco.sitedocaco.entity.User;\nimport org.jspecify.annotations.Nullable;\n\
    import org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Service;\n\
    \nimport java.time.Instant;\nimport java.time.temporal.ChronoUnit;\n\n@Service\n\
    public class JwtService {\n\n    @Value(\"${jwt.secret}\")\n    private String\
    \ secret;\n\n    @Value(\"${jwt.expiration}\")\n    private long expiration;\n\
    \n    // 1. Gerar Token (Login bem sucedido)\n    public String generateToken(User\
    \ user) {\n        return JWT.create()\n                .withSubject(user.getEmail())\
    \ // Identificador principal\n                .withClaim(\"id\", user.getId().toString())\
    \ // Payload útil\n                .withClaim(\"role\", user.getRole().name())\
    \ // Payload útil para o Front\n                .withIssuedAt(Instant.now())\n\
    \                .withExpiresAt(Instant.now().plus(expiration, ChronoUnit.MILLIS))\n\
    \                .withIssuer(\"caco-api\")\n                .sign(Algorithm.HMAC256(secret));\n\
    \    }\n\n    // 2. Validar e Decodificar Token\n    public DecodedJWT validateToken(String\
    \ token) {\n        try {\n            return JWT.require(Algorithm.HMAC256(secret))\n\
    \                    .withIssuer(\"caco-api\")\n                    .build()\n\
    \                    .verify(token);\n        } catch (Exception e) {\n      \
    \      // Token inválido ou expirado\n            return null;\n        }\n  \
    \  }\n\n    // 3. Extrair E-mail (Subject)\n    public String extractUsername(String\
    \ token) {\n        DecodedJWT jwt = validateToken(token);\n        return jwt\
    \ != null ? jwt.getSubject() : null;\n    }\n\n    // 4. Expiration Time in Millis\n\
    \    public long getExpirationInMillis() {\n        return expiration;\n     \
    \   }\n}"
  info:
    "size": "1837"
    "last_modified": "2026-01-07T16:01:24.554853219"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/security/jwt/JwtAuthenticationFilter.java"
  content: "package com.caco.sitedocaco.security.jwt;\n\nimport jakarta.servlet.FilterChain;\n\
    import jakarta.servlet.ServletException;\nimport jakarta.servlet.http.HttpServletRequest;\n\
    import jakarta.servlet.http.HttpServletResponse;\nimport lombok.RequiredArgsConstructor;\n\
    import org.jspecify.annotations.NonNull;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\n\
    import org.springframework.security.core.context.SecurityContextHolder;\nimport\
    \ org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\n\
    import org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\n\
    import org.springframework.stereotype.Component;\nimport org.springframework.web.filter.OncePerRequestFilter;\n\
    \nimport java.io.IOException;\n\n@Component\n@RequiredArgsConstructor\npublic\
    \ class JwtAuthenticationFilter extends OncePerRequestFilter {\n\n    private\
    \ final JwtService jwtService;\n    private final UserDetailsService userDetailsService;\n\
    \n    @Override\n    protected void doFilterInternal(\n            @NonNull HttpServletRequest\
    \ request,\n            @NonNull HttpServletResponse response,\n            @NonNull\
    \ FilterChain filterChain\n    ) throws ServletException, IOException {\n\n  \
    \      final String authHeader = request.getHeader(\"Authorization\");\n     \
    \   final String jwt;\n        final String userEmail;\n\n        if (authHeader\
    \ == null || !authHeader.startsWith(\"Bearer \")) {\n            filterChain.doFilter(request,\
    \ response);\n            return;\n        }\n\n        jwt = authHeader.substring(7);\n\
    \n        // 1. Tenta extrair o email.\n        // Se o token for inválido ou\
    \ expirado, isso retornará NULL (graças ao seu try-catch no JwtService).\n   \
    \     userEmail = jwtService.extractUsername(jwt);\n\n        // 2. Se userEmail\
    \ != null, o token é criptograficamente válido.\n        if (userEmail != null\
    \ && SecurityContextHolder.getContext().getAuthentication() == null) {\n\n   \
    \         // 3. Carrega o usuário do banco (para pegar as Roles e garantir que\
    \ ele não foi deletado)\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(userEmail);\n\
    \n            // 4. Autentica direto, pois já sabemos que o token é válido pelo\
    \ passo 1\n            UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(\n\
    \                    userDetails,\n                    null,\n               \
    \     userDetails.getAuthorities()\n            );\n\n            authToken.setDetails(new\
    \ WebAuthenticationDetailsSource().buildDetails(request));\n            SecurityContextHolder.getContext().setAuthentication(authToken);\n\
    \        }\n\n        filterChain.doFilter(request, response);\n    }\n}"
  info:
    "size": "2721"
    "last_modified": "2026-01-07T16:01:24.558761983"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/security/jwt/UserDetailsServiceImpl.java"
  content: "package com.caco.sitedocaco.security.jwt;\n\nimport com.caco.sitedocaco.entity.User;\n\
    import com.caco.sitedocaco.repository.UserRepository;\nimport lombok.RequiredArgsConstructor;\n\
    import org.jspecify.annotations.NonNull;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\n\
    import org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\n\
    import org.springframework.security.core.userdetails.UsernameNotFoundException;\n\
    import org.springframework.stereotype.Service; // <--- ESTA ANOTAÇÃO É CRUCIAL\n\
    \nimport java.util.Collections;\n\n@Service // Sem isso, o Spring não encontra\
    \ o Bean e dá o erro que você viu\n@RequiredArgsConstructor\npublic class UserDetailsServiceImpl\
    \ implements UserDetailsService {\n\n    private final UserRepository userRepository;\n\
    \n    @Override\n    public UserDetails loadUserByUsername(@NonNull String email)\
    \ throws UsernameNotFoundException {\n        // Busca o usuário no banco pelo\
    \ email\n        User user = userRepository.findByEmail(email)\n             \
    \   .orElseThrow(() -> new UsernameNotFoundException(\"Usuário não encontrado:\
    \ \" + email));\n\n        // Converte a Role do seu Enum (STUDENT) para o padrã\
    o do Spring (ROLE_STUDENT)\n        SimpleGrantedAuthority authority = new SimpleGrantedAuthority(\"\
    ROLE_\" + user.getRole().name());\n\n        // Retorna o objeto User padrão do\
    \ Spring Security\n        return new org.springframework.security.core.userdetails.User(\n\
    \                user.getEmail(),\n                \"\", // Senha vazia (pois\
    \ usamos OAuth2/JWT, não senha local)\n                Collections.singletonList(authority)\n\
    \        );\n    }\n}"
  info:
    "size": "1677"
    "last_modified": "2026-01-07T16:01:24.563273206"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/repository/UserRepository.java"
  content: "package com.caco.sitedocaco.repository;\n\nimport com.caco.sitedocaco.entity.User;\n\
    import org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\
    \nimport java.util.Optional;\nimport java.util.UUID;\n\n@Repository\npublic interface\
    \ UserRepository extends JpaRepository<User, UUID> {\n    Optional<User> findByEmail(String\
    \ email);\n    boolean existsByEmail(String email);\n}"
  info:
    "size": "413"
    "last_modified": "2026-01-07T16:01:24.571061492"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/repository/BannerRepository.java"
  content: "package com.caco.sitedocaco.repository;\n\nimport com.caco.sitedocaco.entity.home.Banner;\n\
    import org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\n\
    import org.springframework.stereotype.Repository;\n\nimport java.util.List;\n\
    import java.util.UUID;\n\n@Repository\npublic interface BannerRepository extends\
    \ JpaRepository<Banner, UUID> {\n    // Busca apenas ativos, ordenados pela ordem\
    \ de exibição definida no admin\n    List<Banner> findByActiveTrueOrderByDisplayOrderAsc();\n\
    \    List<Banner> findAllByActiveFalseOrderByTitleAsc();\n\n    // Busca o maior\
    \ valor de ordem para inserir o próximo no final\n    @Query(\"SELECT MAX(b.displayOrder)\
    \ FROM Banner b\")\n    Integer findMaxDisplayOrder();\n}"
  info:
    "size": "743"
    "last_modified": "2026-01-07T16:01:24.57499954"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/repository/WarningRepository.java"
  content: "package com.caco.sitedocaco.repository;\n\nimport com.caco.sitedocaco.entity.home.Warning;\n\
    import org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\n\
    import org.springframework.stereotype.Repository;\n\nimport java.time.LocalDateTime;\n\
    import java.util.List;\nimport java.util.UUID;\n\n@Repository\npublic interface\
    \ WarningRepository extends JpaRepository<Warning, UUID> {\n    // Ordenando por\
    \ severidade (CRITICAL > HIGH > MEDIUM > LOW) e depois por data de início (mais\
    \ recente primeiro)\n    @Query(\"SELECT w FROM Warning w WHERE w.startsAt <=\
    \ :now AND w.expiresAt > :now \" +\n            \"ORDER BY w.severityLevel DESC,\
    \ w.startsAt DESC\")\n    List<Warning> findActiveWarnings(LocalDateTime now);\n\
    }"
  info:
    "size": "747"
    "last_modified": "2026-01-07T16:01:24.579395739"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/repository/NewsRepository.java"
  content: "package com.caco.sitedocaco.repository;\n\nimport com.caco.sitedocaco.dto.response.NewsSummaryDTO;\n\
    import com.caco.sitedocaco.entity.home.News;\nimport org.springframework.data.domain.Page;\n\
    import org.springframework.data.domain.Pageable;\nimport org.springframework.data.jpa.repository.JpaRepository;\n\
    import org.springframework.data.jpa.repository.Query;\nimport org.springframework.stereotype.Repository;\n\
    \nimport java.util.Optional;\nimport java.util.UUID;\n\n@Repository\npublic interface\
    \ NewsRepository extends JpaRepository<News, UUID> {\n\n    Optional<News> findBySlug(String\
    \ slug);\n\n    boolean existsBySlug(String slug);\n\n    // Optimized Query:\
    \ Returns DTOs directly, skipping the heavy 'content' field\n    @Query(\"SELECT\
    \ new com.caco.sitedocaco.dto.response.NewsSummaryDTO(\" +\n            \"n.id,\
    \ n.title, n.slug, n.summary, n.coverImage, n.publishDate, n.author.username)\
    \ \" +\n            \"FROM News n ORDER BY n.publishDate DESC\")\n    Page<NewsSummaryDTO>\
    \ findAllSummaries(Pageable pageable);\n}"
  info:
    "size": "994"
    "last_modified": "2026-01-07T16:01:24.58361364"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/repository/SubjectRepository.java"
  content: "package com.caco.sitedocaco.repository;\n\nimport com.caco.sitedocaco.entity.exam.Subject;\n\
    import org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\
    \nimport java.util.Optional;\n\n@Repository\npublic interface SubjectRepository\
    \ extends JpaRepository<Subject, String> {\n    Optional<Subject> findBySubjectCode(String\
    \ subjectCode);\n    boolean existsBySubjectCode(String subjectCode);\n    boolean\
    \ existsByName(String name);\n}"
  info:
    "size": "472"
    "last_modified": "2026-01-07T16:01:24.587462662"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/repository/ExamRepository.java"
  content: "// main/java/com/caco/sitedocaco/repository/ExamRepository.java\npackage\
    \ com.caco.sitedocaco.repository;\n\nimport com.caco.sitedocaco.entity.enums.ExamType;\n\
    import com.caco.sitedocaco.entity.exam.Exam;\nimport com.caco.sitedocaco.entity.exam.Subject;\n\
    import jakarta.transaction.Transactional;\nimport org.springframework.data.jpa.repository.JpaRepository;\n\
    import org.springframework.data.jpa.repository.Modifying;\nimport org.springframework.data.jpa.repository.Query;\n\
    import org.springframework.data.repository.query.Param;\nimport org.springframework.stereotype.Repository;\n\
    \nimport java.util.List;\nimport java.util.UUID;\n\n@Repository\npublic interface\
    \ ExamRepository extends JpaRepository<Exam, UUID> {\n    List<Exam> findBySubjectSubjectCode(String\
    \ subjectCode);\n    List<Exam> findByYear(Integer year);\n    List<Exam> findByType(ExamType\
    \ type);\n    List<Exam> findBySubject(Subject subject);\n    boolean existsBySubjectSubjectCodeAndYearAndType(String\
    \ subjectCode, Integer year, ExamType type);\n    @Transactional\n    @Modifying\n\
    \    @Query(\"DELETE FROM Exam e WHERE e.subject.subjectCode = :subjectCode\"\
    )\n    void deleteBySubjectSubjectCode(@Param(\"subjectCode\") String subjectCode);\n\
    }"
  info:
    "size": "1182"
    "last_modified": "2026-01-07T16:01:24.591382297"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/response/UserResponseDTO.java"
  content: "package com.caco.sitedocaco.dto.response;\n\nimport com.caco.sitedocaco.entity.User;\n\
    import com.caco.sitedocaco.entity.enums.Role;\n\nimport java.util.UUID;\n\npublic\
    \ record UserResponseDTO(\n        UUID id,\n        String name,\n        String\
    \ email,\n        String avatarUrl,\n        Role role\n) {\n    public static\
    \ UserResponseDTO fromEntity(User user) {\n        return new UserResponseDTO(\n\
    \                user.getId(),\n                user.getUsername(),\n        \
    \        user.getEmail(),\n                user.getAvatarUrl(),\n            \
    \    user.getRole()\n        );\n    }\n}"
  info:
    "size": "572"
    "last_modified": "2026-01-07T16:01:24.5972372"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/response/ErrorResponseDTO.java"
  content: "package com.caco.sitedocaco.dto.response;\n\nimport java.time.LocalDateTime;\n\
    \npublic record ErrorResponseDTO(\n        LocalDateTime timestamp,\n        int\
    \ status,\n        String error,\n        String message,\n        String path\n\
    ) {\n}"
  info:
    "size": "232"
    "last_modified": "2026-01-07T16:01:24.603727624"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/response/BannerDTO.java"
  content: "package com.caco.sitedocaco.dto.response;\n\nimport java.util.UUID;\n\n\
    public record BannerDTO(\n        UUID id,\n        String title,\n        String\
    \ imageUrl,\n        String targetLink\n) {}"
  info:
    "size": "186"
    "last_modified": "2026-01-07T16:01:24.609709264"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/response/WarningDTO.java"
  content: "package com.caco.sitedocaco.dto.response;\n\nimport com.caco.sitedocaco.entity.enums.SeverityLevel;\n\
    \nimport java.time.LocalDateTime;\nimport java.util.UUID;\n\npublic record WarningDTO(\n\
    \        UUID id,\n        String markdownText,\n        SeverityLevel severityLevel,\n\
    \        LocalDateTime startsAt,\n        LocalDateTime expiresAt\n) {}"
  info:
    "size": "332"
    "last_modified": "2026-01-07T16:01:24.61629511"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/response/NewsSummaryDTO.java"
  content: "package com.caco.sitedocaco.dto.response;\n\nimport java.time.LocalDateTime;\n\
    import java.util.UUID;\n\npublic record NewsSummaryDTO(\n        UUID id,\n  \
    \      String title,\n        String slug,\n        String summary,\n        String\
    \ coverImage,\n        LocalDateTime publishDate,\n        String authorName\n\
    ) {}"
  info:
    "size": "305"
    "last_modified": "2026-01-07T16:01:24.622502808"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/response/DashboardDTO.java"
  content: "package com.caco.sitedocaco.dto.response;\n\nimport java.util.List;\n\n\
    public record DashboardDTO(\n        List<BannerDTO> banners,\n        List<WarningDTO>\
    \ warnings,\n        List<NewsSummaryDTO> latestNews\n) {}"
  info:
    "size": "207"
    "last_modified": "2026-01-07T16:01:24.628744151"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/response/SubjectResponseDTO.java"
  content: "package com.caco.sitedocaco.dto.response;\n\nimport com.caco.sitedocaco.entity.exam.Subject;\n\
    import com.fasterxml.jackson.annotation.JsonProperty;\n\npublic record SubjectResponseDTO(\n\
    \        String subjectCode,\n        String name,\n\n        @JsonProperty(\"\
    examCount\")\n        Long examCount // Número de provas disponíveis\n) {\n  \
    \  public static SubjectResponseDTO fromEntity(Subject subject, Long examCount)\
    \ {\n        return new SubjectResponseDTO(\n                subject.getSubjectCode(),\n\
    \                subject.getName(),\n                examCount\n        );\n \
    \   }\n}"
  info:
    "size": "569"
    "last_modified": "2026-01-07T16:01:24.634343437"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/response/ExamResponseDTO.java"
  content: "// main/java/com/caco/sitedocaco/dto/response/ExamResponseDTO.java\npackage\
    \ com.caco.sitedocaco.dto.response;\n\nimport com.caco.sitedocaco.entity.enums.ExamType;\n\
    import com.caco.sitedocaco.entity.exam.Exam;\nimport com.caco.sitedocaco.entity.exam.Subject;\n\
    import com.fasterxml.jackson.annotation.JsonProperty;\n\nimport java.time.LocalDateTime;\n\
    import java.util.UUID;\n\npublic record ExamResponseDTO(\n        UUID id,\n \
    \       String subjectCode,\n        String subjectName,\n        Integer year,\n\
    \        ExamType type,\n        String fileUrl\n) {\n    public static ExamResponseDTO\
    \ fromEntity(Exam exam) {\n        Subject subject = exam.getSubject();\n    \
    \    return new ExamResponseDTO(\n                exam.getId(),\n            \
    \    subject != null ? subject.getSubjectCode() : null,\n                subject\
    \ != null ? subject.getName() : null,\n                exam.getYear(),\n     \
    \           exam.getType(),\n                exam.getFileUrl()\n        );\n \
    \   }\n}"
  info:
    "size": "952"
    "last_modified": "2026-01-07T16:01:24.639749158"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/response/ExamWithoutSubjectDTO.java"
  content: "package com.caco.sitedocaco.dto.response;\n\nimport com.caco.sitedocaco.entity.enums.ExamType;\n\
    \nimport java.util.UUID;\n\npublic record ExamWithoutSubjectDTO(\n        UUID\
    \ id,\n        Integer year,\n        ExamType type,\n        String fileUrl\n\
    ) {\n}\n"
  info:
    "size": "246"
    "last_modified": "2026-01-07T16:01:24.645138471"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/response/ImageUploadResponseDTO.java"
  content: "package com.caco.sitedocaco.dto.response;\n\npublic record ImageUploadResponseDTO(\n\
    \        String url\n) {}"
  info:
    "size": "104"
    "last_modified": "2026-01-07T16:01:24.650433098"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/request/UpdateProfileDTO.java"
  content: "package com.caco.sitedocaco.dto.request;\n\nimport org.springframework.web.multipart.MultipartFile;\n\
    \npublic record UpdateProfileDTO(\n        String name,\n        MultipartFile\
    \ avatar\n) {\n    public UpdateProfileDTO {\n        // Este construtor vazio\
    \ permite que Spring crie o objeto mesmo com avatar null\n    }\n}"
  info:
    "size": "310"
    "last_modified": "2026-01-07T16:01:24.656961816"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/request/CreateNewsDTO.java"
  content: "package com.caco.sitedocaco.dto.request;\n\nimport jakarta.validation.constraints.NotBlank;\n\
    \npublic record CreateNewsDTO(\n        @NotBlank(message = \"O título é obrigató\
    rio\") String title,\n        @NotBlank(message = \"O resumo é obrigatório\")\
    \ String summary,\n        @NotBlank(message = \"O conteúdo é obrigatório\") String\
    \ content,\n        String coverImage // Opcional no início, pode ser setado depois\n\
    ) {}"
  info:
    "size": "415"
    "last_modified": "2026-01-07T16:01:24.662165595"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/request/UpdateNewsDTO.java"
  content: "package com.caco.sitedocaco.dto.request;\n\npublic record UpdateNewsDTO(\n\
    \        String title,\n        String summary,\n        String content,\n   \
    \     String coverImage\n) {}\n"
  info:
    "size": "172"
    "last_modified": "2026-01-07T16:01:24.668023458"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/request/CreateBannerDTO.java"
  content: "package com.caco.sitedocaco.dto.request;\n\nimport jakarta.validation.constraints.NotBlank;\n\
    import org.springframework.web.multipart.MultipartFile;\n\npublic record CreateBannerDTO(\n\
    \        @NotBlank String title,\n        MultipartFile imageFile,\n        @NotBlank\
    \ String targetLink,\n        Boolean active\n) {}\n"
  info:
    "size": "308"
    "last_modified": "2026-01-07T16:01:24.673384231"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/request/ReorderBannersDTO.java"
  content: "package com.caco.sitedocaco.dto.request;\n\nimport jakarta.validation.constraints.NotNull;\n\
    \nimport java.util.List;\nimport java.util.UUID;\n\npublic record ReorderBannersDTO(\n\
    \        @NotNull List<UUID> bannerIds // Lista ordenada de IDs ex: [ID_A, ID_D,\
    \ ID_B...]\n) {}\n"
  info:
    "size": "264"
    "last_modified": "2026-01-07T16:01:24.678501145"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/request/CreateWarningDTO.java"
  content: "package com.caco.sitedocaco.dto.request;\n\nimport com.caco.sitedocaco.entity.enums.SeverityLevel;\n\
    import jakarta.validation.constraints.Future;\nimport jakarta.validation.constraints.NotBlank;\n\
    import jakarta.validation.constraints.NotNull;\n\nimport java.time.LocalDateTime;\n\
    \npublic record CreateWarningDTO(\n        @NotBlank String markdownText,\n  \
    \      SeverityLevel severityLevel,\n        @NotNull LocalDateTime startsAt,\n\
    \        @NotNull @Future LocalDateTime expiresAt\n) {}\n"
  info:
    "size": "475"
    "last_modified": "2026-01-07T16:01:24.683784725"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/request/UpdateWarningDTO.java"
  content: "package com.caco.sitedocaco.dto.request;\n\nimport com.caco.sitedocaco.entity.enums.SeverityLevel;\n\
    \nimport java.time.LocalDateTime;\n\npublic record UpdateWarningDTO(\n       \
    \ String markdownText,\n        SeverityLevel severityLevel,\n        LocalDateTime\
    \ startsAt,\n        LocalDateTime expiresAt\n) {}\n"
  info:
    "size": "298"
    "last_modified": "2026-01-07T16:01:24.688904467"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/request/UpdateBannerDTO.java"
  content: "package com.caco.sitedocaco.dto.request;\n\nimport org.springframework.web.multipart.MultipartFile;\n\
    \npublic record UpdateBannerDTO(\n        String title,\n        MultipartFile\
    \ imageFile,\n        String targetLink,\n        Boolean active\n) {}"
  info:
    "size": "239"
    "last_modified": "2026-01-07T16:01:24.693926536"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/request/CreateSubjectDTO.java"
  content: "package com.caco.sitedocaco.dto.request;\n\nimport jakarta.validation.constraints.NotBlank;\n\
    \npublic record CreateSubjectDTO(\n        @NotBlank(message = \"O código da disciplina\
    \ é obrigatório\")\n        String subjectCode,\n\n        @NotBlank(message =\
    \ \"O nome da disciplina é obrigatório\")\n        String name\n) {}"
  info:
    "size": "315"
    "last_modified": "2026-01-07T16:01:24.699059506"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/request/CreateExamDTO.java"
  content: "// main/java/com/caco/sitedocaco/dto/request/CreateExamDTO.java\npackage\
    \ com.caco.sitedocaco.dto.request;\n\nimport com.caco.sitedocaco.entity.enums.ExamType;\n\
    import jakarta.validation.constraints.NotNull;\n\npublic record CreateExamDTO(\n\
    \        @NotNull(message = \"A disciplina é obrigatória\")\n        String subjectCode,\n\
    \n        @NotNull(message = \"O ano é obrigatório\")\n        Integer year,\n\
    \n        @NotNull(message = \"O tipo de prova é obrigatório\")\n        ExamType\
    \ type,\n\n        @NotNull(message = \"O link do PDF é obrigatório\")\n     \
    \   String fileUrl\n) {}"
  info:
    "size": "569"
    "last_modified": "2026-01-07T16:01:24.704245053"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/dto/request/UpdateExamDTO.java"
  content: "package com.caco.sitedocaco.dto.request;\n\nimport com.caco.sitedocaco.entity.enums.ExamType;\n\
    import org.springframework.web.multipart.MultipartFile;\n\npublic record UpdateExamDTO(\n\
    \        String subjectCode,\n        Integer year,\n        ExamType type,\n\
    \        String fileUrl\n) {}"
  info:
    "size": "278"
    "last_modified": "2026-01-07T16:01:24.709368603"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/service/UserService.java"
  content: "package com.caco.sitedocaco.service;\n\nimport com.caco.sitedocaco.dto.request.UpdateProfileDTO;\n\
    import com.caco.sitedocaco.dto.response.UserResponseDTO;\nimport com.caco.sitedocaco.entity.User;\n\
    import com.caco.sitedocaco.entity.enums.ImageType;\nimport com.caco.sitedocaco.exception.ResourceNotFoundException;\n\
    import com.caco.sitedocaco.repository.UserRepository;\nimport lombok.RequiredArgsConstructor;\n\
    import org.springframework.security.core.context.SecurityContextHolder;\nimport\
    \ org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\
    import org.springframework.web.multipart.MultipartFile;\n\nimport java.io.IOException;\n\
    \n@Service\n@RequiredArgsConstructor\npublic class UserService {\n\n    private\
    \ final UserRepository userRepository;\n    private final ImgBBService imgBBService;\n\
    \n    /**\n     * Pega o e-mail do Token JWT (via SecurityContext) e busca o usuá\
    rio no banco.\n     */\n    @Transactional(readOnly = true)\n    public UserResponseDTO\
    \ getMe() {\n        String email = SecurityContextHolder.getContext().getAuthentication().getName();\n\
    \n        User user = userRepository.findByEmail(email)\n                .orElseThrow(()\
    \ -> new ResourceNotFoundException(\"Usuário logado não encontrado no banco.\"\
    ));\n\n        return UserResponseDTO.fromEntity(user);\n    }\n\n    /**\n  \
    \   * Atualiza dados básicos do perfil\n     */\n    /**\n     * Atualiza dados\
    \ do perfil do usuário logado\n     * @param request DTO com campos opcionais\
    \ (nome e/ou avatar)\n     * @return DTO do usuário atualizado\n     */\n    @Transactional\n\
    \    public UserResponseDTO updateProfile(UpdateProfileDTO request) throws IOException\
    \ {\n        String email = SecurityContextHolder.getContext().getAuthentication().getName();\n\
    \        User user = userRepository.findByEmail(email)\n                .orElseThrow(()\
    \ -> new ResourceNotFoundException(\"Usuário não encontrado\"));\n\n\n       \
    \ // Atualizar nome se fornecido\n        if (request.name() != null && !request.name().isBlank())\
    \ {\n            user.setUsername(request.name());\n        }\n\n        // Processar\
    \ avatar se fornecido\n        if (request.avatar() != null && !request.avatar().isEmpty())\
    \ {\n            String newAvatarUrl = uploadAvatarImage(request.avatar());\n\
    \            user.setAvatarUrl(newAvatarUrl);\n        }\n\n        // Salvar\
    \ alterações\n        User savedUser = userRepository.save(user);\n\n        return\
    \ UserResponseDTO.fromEntity(savedUser);\n    }\n\n    /**\n     * Faz upload\
    \ da imagem do avatar para o ImgBB\n     */\n    private String uploadAvatarImage(MultipartFile\
    \ avatarFile) throws IOException {\n        try {\n            // Usar o serviç\
    o ImgBB para fazer upload\n            String imageUrl = imgBBService.uploadImage(avatarFile,\
    \ ImageType.PROFILE_AVATAR);\n\n            return imageUrl;\n\n        } catch\
    \ (IOException e) {\n            throw new IOException(\"Não foi possível fazer\
    \ upload da imagem do perfil\", e);\n        }\n    }\n\n    /**\n     * Método\
    \ auxiliar para obter o usuário atual\n     */\n    @Transactional(readOnly =\
    \ true)\n    public User getCurrentUser() {\n        String email = SecurityContextHolder.getContext().getAuthentication().getName();\n\
    \        return userRepository.findByEmail(email)\n                .orElseThrow(()\
    \ -> new ResourceNotFoundException(\"Usuário não encontrado\"));\n    }\n\n  \
    \  /**\n     * Método para deletar avatar (opcional)\n     */\n    @Transactional\n\
    \    public void removeAvatar() {\n        User user = getCurrentUser();\n\n \
    \       // Aqui você poderia deletar a imagem do ImgBB se necessário\n       \
    \ // Por enquanto, apenas setamos como null\n        user.setAvatarUrl(null);\n\
    \        userRepository.save(user);\n    }\n}"
  info:
    "size": "3657"
    "last_modified": "2026-01-07T16:01:24.717197058"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/service/BannerService.java"
  content: "package com.caco.sitedocaco.service;\n\nimport com.caco.sitedocaco.dto.request.CreateBannerDTO;\n\
    import com.caco.sitedocaco.dto.request.UpdateBannerDTO;\nimport com.caco.sitedocaco.dto.response.BannerDTO;\n\
    import com.caco.sitedocaco.entity.enums.ImageType;\nimport com.caco.sitedocaco.entity.home.Banner;\n\
    import com.caco.sitedocaco.exception.ResourceNotFoundException;\nimport com.caco.sitedocaco.repository.BannerRepository;\n\
    import lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\n\
    import org.springframework.transaction.annotation.Transactional;\n\nimport java.io.IOException;\n\
    import java.util.List;\nimport java.util.UUID;\n\n@Service\n@RequiredArgsConstructor\n\
    public class BannerService {\n\n    private final BannerRepository bannerRepository;\n\
    \    private final ImgBBService imgBBService;\n\n    @Transactional(readOnly =\
    \ true)\n    public List<BannerDTO> getActiveBanners() {\n        return bannerRepository.findByActiveTrueOrderByDisplayOrderAsc()\n\
    \                .stream()\n                .map(b -> new BannerDTO(b.getId(),\
    \ b.getTitle(), b.getImageUrl(), b.getTargetLink()))\n                .toList();\n\
    \    }\n\n    public List<BannerDTO> getInactiveBanners() {\n        return bannerRepository.findAllByActiveFalseOrderByTitleAsc()\n\
    \                .stream()\n                .map(b -> new BannerDTO(b.getId(),\
    \ b.getTitle(), b.getImageUrl(), b.getTargetLink()))\n                .toList();\n\
    \    }\n\n    @Transactional\n    public Banner createBanner(CreateBannerDTO dto)\
    \ throws IOException {\n        Banner banner = new Banner();\n        banner.setTitle(dto.title());\n\
    \n        // Fazer upload da imagem\n        if (dto.imageFile() != null && !dto.imageFile().isEmpty())\
    \ {\n            String imageUrl = imgBBService.uploadImage(dto.imageFile(), ImageType.BANNER_IMAGE);\n\
    \            banner.setImageUrl(imageUrl);\n        }\n\n        banner.setTargetLink(dto.targetLink());\n\
    \        banner.setActive(dto.active() != null ? dto.active() : true);\n\n   \
    \     // Ordenação automática\n        Integer maxOrder = bannerRepository.findMaxDisplayOrder();\n\
    \        banner.setDisplayOrder(maxOrder == null ? 0 : maxOrder + 1);\n\n    \
    \    return bannerRepository.save(banner);\n    }\n\n    @Transactional\n    public\
    \ Banner updateBanner(UUID id, UpdateBannerDTO dto) throws IOException {\n   \
    \     Banner banner = bannerRepository.findById(id)\n                .orElseThrow(()\
    \ -> new ResourceNotFoundException(\"Banner não encontrado\"));\n\n        if\
    \ (dto.title() != null) banner.setTitle(dto.title());\n\n        // Atualizar\
    \ imagem se fornecida\n        if (dto.imageFile() != null && !dto.imageFile().isEmpty())\
    \ {\n            String imageUrl = imgBBService.uploadImage(dto.imageFile(), ImageType.BANNER_IMAGE);\n\
    \            banner.setImageUrl(imageUrl);\n        }\n\n        if (dto.targetLink()\
    \ != null) banner.setTargetLink(dto.targetLink());\n        if (dto.active() !=\
    \ null) banner.setActive(dto.active());\n\n        return bannerRepository.save(banner);\n\
    \    }\n\n    @Transactional\n    public Banner toggleActive(UUID id) {\n    \
    \    Banner banner = bannerRepository.findById(id)\n                .orElseThrow(()\
    \ -> new ResourceNotFoundException(\"Banner não encontrado\"));\n        banner.setActive(!banner.getActive());\n\
    \        // Colocar banner em último na ordem se ativado\n        if (banner.getActive())\
    \ {\n            Integer maxOrder = bannerRepository.findMaxDisplayOrder();\n\
    \            banner.setDisplayOrder(maxOrder == null ? 0 : maxOrder + 1);\n  \
    \      }\n        return bannerRepository.save(banner);\n    }\n\n    @Transactional\n\
    \    public void deleteBanner(UUID id) {\n        bannerRepository.deleteById(id);\n\
    \    }\n\n    /**\n     * Função Especial: Reordenar Banners\n     * Recebe uma\
    \ lista de IDs na ordem desejada (A, D, B, C, E)\n     * Itera e atualiza o displayOrder\
    \ de acordo com o índice na lista.\n     */\n    @Transactional\n    public void\
    \ reorderBanners(List<UUID> orderedIds) {\n        // Atualiza a ordem baseada\
    \ na lista recebida.\n        // Nota: Isso funciona mesmo se a lista misturar\
    \ ativos e inativos,\n        // mas idealmente o front deve mandar a lista do\
    \ contexto que está vendo.\n        for (int i = 0; i < orderedIds.size(); i++)\
    \ {\n            UUID id = orderedIds.get(i);\n            // Usamos ifPresent\
    \ para evitar erro caso o ID tenha sido deletado recentemente\n            int\
    \ finalI = i;\n            bannerRepository.findById(id).ifPresent(banner -> {\n\
    \                banner.setDisplayOrder(finalI);\n                bannerRepository.save(banner);\n\
    \            });\n        }\n    }\n}"
  info:
    "size": "4501"
    "last_modified": "2026-01-07T16:01:24.722309227"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/service/WarningService.java"
  content: "package com.caco.sitedocaco.service;\n\nimport com.caco.sitedocaco.dto.request.CreateWarningDTO;\n\
    import com.caco.sitedocaco.dto.request.UpdateWarningDTO;\nimport com.caco.sitedocaco.dto.response.WarningDTO;\n\
    import com.caco.sitedocaco.entity.home.Warning;\nimport com.caco.sitedocaco.exception.BusinessRuleException;\n\
    import com.caco.sitedocaco.exception.ResourceNotFoundException;\nimport com.caco.sitedocaco.repository.WarningRepository;\n\
    import lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\n\
    import org.springframework.transaction.annotation.Transactional;\n\nimport java.time.LocalDateTime;\n\
    import java.util.List;\nimport java.util.UUID;\n\n@Service\n@RequiredArgsConstructor\n\
    public class WarningService {\n\n    private final WarningRepository warningRepository;\n\
    \n    @Transactional(readOnly = true)\n    public List<WarningDTO> getActiveWarnings()\
    \ {\n        return warningRepository.findActiveWarnings(LocalDateTime.now())\n\
    \                .stream()\n                .map(w -> new WarningDTO(w.getId(),\
    \ w.getMarkdownText(), w.getSeverityLevel(), w.getStartsAt(), w.getExpiresAt()))\n\
    \                .toList();\n    }\n\n    @Transactional(readOnly = true)\n  \
    \  public List<WarningDTO> getAllWarnings() {\n        return warningRepository.findAll()\n\
    \                .stream()\n                .map(w -> new WarningDTO(w.getId(),\
    \ w.getMarkdownText(), w.getSeverityLevel(), w.getStartsAt(), w.getExpiresAt()))\n\
    \                .toList();\n    }\n\n\n    @Transactional\n    public Warning\
    \ createWarning(CreateWarningDTO dto) {\n        if (dto.expiresAt().isBefore(dto.startsAt()))\
    \ {\n            throw new IllegalArgumentException(\"A data de expiração deve\
    \ ser posterior ao início.\");\n        }\n        Warning warning = new Warning();\n\
    \        warning.setMarkdownText(dto.markdownText());\n        warning.setSeverityLevel(dto.severityLevel());\n\
    \        warning.setStartsAt(dto.startsAt());\n        warning.setExpiresAt(dto.expiresAt());\n\
    \        return warningRepository.save(warning);\n    }\n\n    /**\n     * Funç\
    ão Especial: Expirar Aviso Imediatamente\n     * Define o expiresAt para agora,\
    \ removendo-o da visualização pública\n     * (considerando a query de filtro\
    \ padrão NOW() between start and expires).\n     */\n    @Transactional\n    public\
    \ void expireWarningNow(UUID id) {\n        Warning warning = warningRepository.findById(id)\n\
    \                .orElseThrow(() -> new ResourceNotFoundException(\"Aviso não\
    \ encontrado\"));\n\n        warning.setExpiresAt(LocalDateTime.now());\n    \
    \    warningRepository.save(warning);\n    }\n\n    @Transactional\n    public\
    \ Warning updateWarning(UUID id, UpdateWarningDTO dto) {\n        Warning warning\
    \ = warningRepository.findById(id)\n                .orElseThrow(() -> new ResourceNotFoundException(\"\
    Aviso não encontrado\"));\n\n        // Se datas forem passadas, valida consistê\
    ncia\n        LocalDateTime newStart = dto.startsAt() != null ? dto.startsAt()\
    \ : warning.getStartsAt();\n        LocalDateTime newEnd = dto.expiresAt() !=\
    \ null ? dto.expiresAt() : warning.getExpiresAt();\n\n        if (dto.startsAt()\
    \ != null || dto.expiresAt() != null) {\n            validateDates(newStart, newEnd);\n\
    \        }\n\n        if (dto.markdownText() != null) warning.setMarkdownText(dto.markdownText());\n\
    \        if (dto.severityLevel() != null) warning.setSeverityLevel(dto.severityLevel());\n\
    \        if (dto.startsAt() != null) warning.setStartsAt(dto.startsAt());\n  \
    \      if (dto.expiresAt() != null) warning.setExpiresAt(dto.expiresAt());\n\n\
    \        return warningRepository.save(warning);\n    }\n\n    @Transactional\n\
    \    public void deleteWarning(UUID id) {\n        warningRepository.deleteById(id);\n\
    \    }\n\n    private void validateDates(LocalDateTime start, LocalDateTime end)\
    \ {\n        if (end.isBefore(start)) {\n            throw new BusinessRuleException(\"\
    Data de expiração deve ser após o início.\");\n        }\n    }\n}"
  info:
    "size": "3852"
    "last_modified": "2026-01-07T16:01:24.727265923"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/service/NewsService.java"
  content: "package com.caco.sitedocaco.service;\n\n\n\nimport com.caco.sitedocaco.dto.request.CreateNewsDTO;\n\
    import com.caco.sitedocaco.dto.request.UpdateNewsDTO;\nimport com.caco.sitedocaco.dto.response.NewsSummaryDTO;\n\
    import com.caco.sitedocaco.entity.User;\nimport com.caco.sitedocaco.entity.home.News;\n\
    import com.caco.sitedocaco.exception.ResourceNotFoundException;\nimport com.caco.sitedocaco.repository.NewsRepository;\n\
    import com.caco.sitedocaco.repository.UserRepository;\nimport jakarta.persistence.EntityNotFoundException;\n\
    import lombok.RequiredArgsConstructor;\nimport org.springframework.data.domain.PageRequest;\n\
    import org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\
    \nimport java.nio.file.AccessDeniedException;\nimport java.text.Normalizer;\n\
    import java.time.LocalDateTime;\nimport java.util.List;\nimport java.util.Locale;\n\
    import java.util.UUID;\n\n@Service\n@RequiredArgsConstructor\npublic class NewsService\
    \ {\n\n    private final NewsRepository newsRepository;\n    private final UserRepository\
    \ userRepository;\n\n    @Transactional(readOnly = true)\n    public List<NewsSummaryDTO>\
    \ getLatestNews(int limit) {\n        return newsRepository.findAllSummaries(PageRequest.of(0,\
    \ limit)).getContent();\n    }\n\n    @Transactional\n    public News createNews(CreateNewsDTO\
    \ dto, UUID authorId) {\n        User author = userRepository.findById(authorId)\n\
    \                .orElseThrow(() -> new ResourceNotFoundException(\"Autor não\
    \ encontrado\"));\n\n        News news = new News();\n        news.setTitle(dto.title());\n\
    \        news.setSummary(dto.summary());\n        news.setContent(dto.content());\n\
    \        news.setCoverImage(dto.coverImage());\n        news.setAuthor(author);\n\
    \        news.setPublishDate(LocalDateTime.now());\n\n        // Regra de Negó\
    cio: Gerar Slug único [cite: 276]\n        news.setSlug(generateUniqueSlug(dto.title()));\n\
    \n        return newsRepository.save(news);\n    }\n\n    @Transactional\n   \
    \ public News updateNews(UUID id, UpdateNewsDTO dto, UUID requesterId, boolean\
    \ isAdmin) throws AccessDeniedException {\n        News news = newsRepository.findById(id)\n\
    \                .orElseThrow(() -> new EntityNotFoundException(\"Notícia não\
    \ encontrada\"));\n\n        // REGRA DE NEGÓCIO: Só Admin ou o Próprio Autor\
    \ podem editar\n        validateOwnership(news, requesterId, isAdmin);\n\n   \
    \     if (dto.title() != null) news.setTitle(dto.title());\n        if (dto.summary()\
    \ != null) news.setSummary(dto.summary());\n        if (dto.content() != null)\
    \ news.setContent(dto.content());\n        if (dto.coverImage() != null) news.setCoverImage(dto.coverImage());\n\
    \n        return newsRepository.save(news);\n    }\n\n    @Transactional\n   \
    \ public void deleteNews(UUID id, UUID requesterId, boolean isAdmin) throws AccessDeniedException\
    \ {\n        News news = newsRepository.findById(id)\n                .orElseThrow(()\
    \ -> new EntityNotFoundException(\"Notícia não encontrada\"));\n\n        // REGRA\
    \ DE NEGÓCIO: Só Admin ou o Próprio Autor podem deletar\n        validateOwnership(news,\
    \ requesterId, isAdmin);\n\n        newsRepository.delete(news);\n    }\n\n  \
    \  private void validateOwnership(News news, UUID requesterId, boolean isAdmin)\
    \ throws AccessDeniedException {\n        if (isAdmin) return; // Admin pode tudo\n\
    \n        if (!news.getAuthor().getId().equals(requesterId)) {\n            throw\
    \ new AccessDeniedException(\"Você só pode alterar notícias criadas por você.\"\
    );\n        }\n    }\n\n    // Lógica para gerar slug (ex: \"Festa Junina\" ->\
    \ \"festa-junina\") [cite: 276]\n    private String generateUniqueSlug(String\
    \ title) {\n        String baseSlug = Normalizer.normalize(title, Normalizer.Form.NFD)\n\
    \                .replaceAll(\"[\\\\p{InCombiningDiacriticalMarks}]\", \"\")\n\
    \                .toLowerCase(Locale.ROOT)\n                .replaceAll(\"[^a-z0-9\\\
    \\s-]\", \"\")\n                .trim()\n                .replaceAll(\"\\\\s+\"\
    , \"-\");\n\n        String uniqueSlug = baseSlug;\n        int counter = 1;\n\
    \n        // Garante unicidade adicionando sufixo numérico\n        while (newsRepository.existsBySlug(uniqueSlug))\
    \ {\n            uniqueSlug = baseSlug + \"-\" + counter;\n            counter++;\n\
    \        }\n        return uniqueSlug;\n    }\n}"
  info:
    "size": "4162"
    "last_modified": "2026-01-07T16:01:24.732533465"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/service/ImgBBService.java"
  content: "// main/java/com/caco/sitedocaco/service/ImgBBService.java\npackage com.caco.sitedocaco.service;\n\
    \nimport com.caco.sitedocaco.config.ImgBBConfig;\nimport com.caco.sitedocaco.entity.enums.ImageType;\n\
    import com.caco.sitedocaco.exception.BusinessRuleException;\nimport lombok.RequiredArgsConstructor;\n\
    import lombok.extern.slf4j.Slf4j;\nimport org.springframework.http.*;\nimport\
    \ org.springframework.stereotype.Service;\nimport org.springframework.util.LinkedMultiValueMap;\n\
    import org.springframework.util.MultiValueMap;\nimport org.springframework.web.client.RestTemplate;\n\
    import org.springframework.web.multipart.MultipartFile;\n\nimport javax.imageio.ImageIO;\n\
    import java.awt.image.BufferedImage;\nimport java.io.ByteArrayInputStream;\nimport\
    \ java.io.IOException;\nimport java.util.Base64;\nimport java.util.Map;\n\n@Slf4j\n\
    @Service\n@RequiredArgsConstructor\npublic class ImgBBService {\n\n    private\
    \ final ImgBBConfig imgBBConfig;\n    private final RestTemplate restTemplate\
    \ = new RestTemplate();\n\n    /**\n     * Faz upload de uma imagem para o ImgBB\n\
    \     * @param file Arquivo de imagem\n     * @return URL pública da imagem no\
    \ ImgBB\n     */\n    public String uploadImage(MultipartFile file) throws IOException\
    \ {\n        // Converter para Base64\n        byte[] fileBytes = file.getBytes();\n\
    \        String base64Image = Base64.getEncoder().encodeToString(fileBytes);\n\
    \n        // Fazer upload para ImgBB\n        return uploadToImgBB(base64Image,\
    \ file.getOriginalFilename());\n    }\n\n    /**\n     * Faz upload de uma imagem\
    \ para o ImgBB\n     * @param file Arquivo de imagem\n     * @param imageType\
    \ Tipo da imagem (para validação)\n     * @return URL pública da imagem no ImgBB\n\
    \     */\n    public String uploadImage(MultipartFile file, ImageType imageType)\
    \ throws IOException {\n        validateImage(file, imageType);\n\n        return\
    \ uploadImage(file);\n    }\n\n    /**\n     * Upload direto com Base64 (útil\
    \ para processar antes)\n     */\n    public String uploadImage(String base64Image,\
    \ String fileName, ImageType imageType) throws IOException {\n        // Decodificar\
    \ para validar\n        byte[] imageBytes = Base64.getDecoder().decode(base64Image);\n\
    \        validateImageBytes(imageBytes, imageType);\n\n        return uploadToImgBB(base64Image,\
    \ fileName);\n    }\n\n    private String uploadToImgBB(String base64Image, String\
    \ fileName) {\n        // Configurar headers\n        HttpHeaders headers = new\
    \ HttpHeaders();\n        headers.setContentType(MediaType.APPLICATION_FORM_URLENCODED);\n\
    \n        // Criar body da requisição\n        MultiValueMap<String, String> body\
    \ = new LinkedMultiValueMap<>();\n        body.add(\"key\", imgBBConfig.getApiKey());\n\
    \        body.add(\"image\", base64Image);\n        if (fileName != null) {\n\
    \            body.add(\"name\", fileName);\n        }\n\n        // Criar request\n\
    \        HttpEntity<MultiValueMap<String, String>> request = new HttpEntity<>(body,\
    \ headers);\n\n        try {\n            // Fazer a requisição\n            ResponseEntity<Map>\
    \ response = restTemplate.postForEntity(\n                    imgBBConfig.getApiUrl(),\n\
    \                    request,\n                    Map.class\n            );\n\
    \n            // Verificar resposta\n            if (response.getStatusCode()\
    \ != HttpStatus.OK || response.getBody() == null) {\n                throw new\
    \ RuntimeException(\"Falha ao fazer upload para ImgBB\");\n            }\n\n \
    \           Map<String, Object> responseBody = response.getBody();\n\n       \
    \     // Verificar sucesso\n            Boolean success = (Boolean) responseBody.get(\"\
    success\");\n            if (success == null || !success) {\n                throw\
    \ new RuntimeException(\"Falha ao fazer upload para ImgBB\");\n            }\n\
    \n            // Extrair URL da imagem\n            Map<String, Object> data =\
    \ (Map<String, Object>) responseBody.get(\"data\");\n            return (String)\
    \ data.get(\"url\");\n\n        } catch (Exception e) {\n            log.error(\"\
    Erro ao fazer upload para ImgBB: {}\", e.getMessage());\n            throw new\
    \ RuntimeException(\"Falha ao fazer upload da imagem: \" + e.getMessage(), e);\n\
    \        }\n    }\n\n    private void validateImage(MultipartFile file, ImageType\
    \ imageType) throws IOException {\n        // Verificar tamanho\n        if (file.getSize()\
    \ > imageType.getMaxSizeBytes()) {\n            throw new BusinessRuleException(\n\
    \                    String.format(\"Imagem muito grande. Máximo permitido: %dMB\"\
    ,\n                            imageType.getMaxSizeBytes() / (1024 * 1024))\n\
    \            );\n        }\n\n        // Verificar tipo MIME\n        String contentType\
    \ = file.getContentType();\n        if (contentType == null || !contentType.startsWith(\"\
    image/\")) {\n            throw new BusinessRuleException(\"Arquivo não é uma\
    \ imagem válida\");\n        }\n\n        // Ler e validar dimensões\n       \
    \ byte[] bytes = file.getBytes();\n        validateImageBytes(bytes, imageType);\n\
    \    }\n\n    private void validateImageBytes(byte[] imageBytes, ImageType imageType)\
    \ throws IOException {\n        BufferedImage image = ImageIO.read(new ByteArrayInputStream(imageBytes));\n\
    \        if (image == null) {\n            throw new BusinessRuleException(\"\
    Não foi possível ler a imagem\");\n        }\n\n        int width = image.getWidth();\n\
    \        int height = image.getHeight();\n        double aspectRatio = (double)\
    \ width / height;\n        double targetAspectRatio = imageType.getAspectRatio();\n\
    \n        // Verificar aspect ratio (com 5% de tolerância)\n        if (Math.abs(aspectRatio\
    \ - targetAspectRatio) > targetAspectRatio * 0.05) {\n            throw new BusinessRuleException(\n\
    \                    String.format(\"Aspect ratio incorreto. Esperado: %d:%d.\
    \ Recebido: %d:%d\",\n                            imageType.getAspectRatioWidth(),\
    \ imageType.getAspectRatioHeight(),\n                            width, height)\n\
    \            );\n        }\n\n        // Verificar dimensões máximas\n       \
    \ if (width > imageType.getMaxWidth() || height > imageType.getMaxHeight()) {\n\
    \            throw new BusinessRuleException(\n                    String.format(\"\
    Dimensões muito grandes. Máximo: %dx%d\",\n                            imageType.getMaxWidth(),\
    \ imageType.getMaxHeight())\n            );\n        }\n    }\n\n\n    // ===================\
    \ PDF UPLOAD  ===================\n    /**\n     * Upload de arquivo com nome\
    \ customizado\n     *\n     * @param file Arquivo a ser enviado\n     * @param\
    \ customName Nome customizado (opcional)\n     * @return URL pública do arquivo\n\
    \     * @throws IOException Se ocorrer erro ao ler o arquivo\n     */\n    public\
    \ String uploadFile(MultipartFile file, String customName) throws IOException\
    \ {\n        // Validar tamanho máximo (32MB - limite do ImgBB)\n        long\
    \ maxSize = 32 * 1024 * 1024; // 32MB em bytes\n        if (file.getSize() > maxSize)\
    \ {\n            throw new IllegalArgumentException(\n                    String.format(\"\
    Arquivo muito grande. Máximo: %dMB\", maxSize / (1024 * 1024))\n            );\n\
    \        }\n\n        // Converter para Base64\n        byte[] fileBytes = file.getBytes();\n\
    \        String base64File = Base64.getEncoder().encodeToString(fileBytes);\n\n\
    \        // Usar nome do arquivo original se customName for null\n        String\
    \ fileName = customName != null ? customName : file.getOriginalFilename();\n\n\
    \        // Fazer upload\n        return uploadToImgBB(base64File, fileName);\n\
    \    }\n\n    /**\n     * Upload específico para PDF com validação\n     *\n \
    \    * @param pdfFile Arquivo PDF\n     * @param customName Nome customizado (opcional)\n\
    \     * @return URL pública do PDF\n     * @throws IOException Se não for PDF\
    \ válido\n     */\n    public String uploadPdf(MultipartFile pdfFile, String customName)\
    \ throws IOException {\n        // Validar se é PDF\n        String contentType\
    \ = pdfFile.getContentType();\n        String originalName = pdfFile.getOriginalFilename();\n\
    \n        boolean isPdf = \"application/pdf\".equals(contentType) ||\n       \
    \         (originalName != null && originalName.toLowerCase().endsWith(\".pdf\"\
    ));\n\n        if (!isPdf) {\n            throw new IllegalArgumentException(\"\
    O arquivo deve ser um PDF válido\");\n        }\n\n        return uploadFile(pdfFile,\
    \ customName);\n    }\n\n    /**\n     * Upload específico para PDF sem nome customizado\n\
    \     */\n    public String uploadPdf(MultipartFile pdfFile) throws IOException\
    \ {\n        return uploadPdf(pdfFile, null);\n    }\n}"
  info:
    "size": "8253"
    "last_modified": "2026-01-07T16:01:24.737998828"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/service/SubjectService.java"
  content: "package com.caco.sitedocaco.service;\n\nimport com.caco.sitedocaco.dto.request.CreateSubjectDTO;\n\
    import com.caco.sitedocaco.entity.exam.Subject;\nimport com.caco.sitedocaco.exception.BusinessRuleException;\n\
    import com.caco.sitedocaco.exception.ResourceNotFoundException;\nimport com.caco.sitedocaco.repository.ExamRepository;\n\
    import com.caco.sitedocaco.repository.SubjectRepository;\nimport lombok.RequiredArgsConstructor;\n\
    import org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\
    \nimport java.util.List;\n\n@Service\n@RequiredArgsConstructor\npublic class SubjectService\
    \ {\n\n    private final SubjectRepository subjectRepository;\n    private final\
    \ ExamRepository examRepository;\n\n    @Transactional\n    public Subject createSubject(CreateSubjectDTO\
    \ dto) {\n        if (subjectRepository.existsBySubjectCode(dto.subjectCode()))\
    \ {\n            throw new BusinessRuleException(\"Já existe uma disciplina com\
    \ este código\");\n        }\n\n        if (subjectRepository.existsByName(dto.name()))\
    \ {\n            throw new BusinessRuleException(\"Já existe uma disciplina com\
    \ este nome\");\n        }\n\n        Subject subject = new Subject();\n     \
    \   subject.setSubjectCode(dto.subjectCode().toUpperCase().trim());\n        subject.setName(dto.name().trim());\n\
    \n        return subjectRepository.save(subject);\n    }\n\n    @Transactional(readOnly\
    \ = true)\n    public List<Subject> getAllSubjects() {\n        return subjectRepository.findAll();\n\
    \    }\n\n    @Transactional(readOnly = true)\n    public Subject getSubjectByCode(String\
    \ subjectCode) {\n        return subjectRepository.findBySubjectCode(subjectCode.toUpperCase())\n\
    \                .orElseThrow(() -> new ResourceNotFoundException(\"Disciplina\
    \ não encontrada\"));\n    }\n\n    @Transactional\n    public void deleteSubject(String\
    \ subjectCode) {\n        Subject subject = getSubjectByCode(subjectCode);\n \
    \       examRepository.deleteBySubjectSubjectCode(subject.getSubjectCode());\n\
    \        subjectRepository.delete(subject);\n    }\n}"
  info:
    "size": "2006"
    "last_modified": "2026-01-07T16:01:24.743336893"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/service/ExamService.java"
  content: "package com.caco.sitedocaco.service;\n\nimport com.caco.sitedocaco.dto.request.CreateExamDTO;\n\
    import com.caco.sitedocaco.dto.request.UpdateExamDTO;\nimport com.caco.sitedocaco.dto.response.ExamWithoutSubjectDTO;\n\
    import com.caco.sitedocaco.entity.exam.Exam;\nimport com.caco.sitedocaco.entity.exam.Subject;\n\
    import com.caco.sitedocaco.exception.BusinessRuleException;\nimport com.caco.sitedocaco.exception.ResourceNotFoundException;\n\
    import com.caco.sitedocaco.repository.ExamRepository;\nimport lombok.RequiredArgsConstructor;\n\
    import org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\
    \nimport java.io.IOException;\nimport java.util.List;\nimport java.util.UUID;\n\
    \n@Service\n@RequiredArgsConstructor\npublic class ExamService {\n\n    private\
    \ final ExamRepository examRepository;\n    private final SubjectService subjectService;\n\
    \n    @Transactional\n    public Exam createExam(CreateExamDTO dto) {\n      \
    \  Subject subject = subjectService.getSubjectByCode(dto.subjectCode());\n\n \
    \       boolean exists = examRepository.existsBySubjectSubjectCodeAndYearAndType(\n\
    \                dto.subjectCode(), dto.year(), dto.type()\n        );\n\n   \
    \     if (exists) {\n            throw new BusinessRuleException(\n          \
    \          String.format(\"Já existe uma prova do tipo %s para %s no ano %d\"\
    ,\n                            dto.type(), subject.getName(), dto.year())\n  \
    \          );\n        }\n\n        Exam exam = new Exam();\n        exam.setSubject(subject);\n\
    \        exam.setYear(dto.year());\n        exam.setType(dto.type());\n      \
    \  exam.setFileUrl(dto.fileUrl());\n\n        return examRepository.save(exam);\n\
    \    }\n\n    @Transactional(readOnly = true)\n    public List<Exam> getAllExams()\
    \ {\n        return examRepository.findAll();\n    }\n\n    @Transactional(readOnly\
    \ = true)\n    public Exam getExamById(UUID id) {\n        return examRepository.findById(id)\n\
    \                .orElseThrow(() -> new ResourceNotFoundException(\"Prova não\
    \ encontrada\"));\n    }\n\n    @Transactional(readOnly = true)\n    public List<ExamWithoutSubjectDTO>\
    \ getExamsBySubject(String subjectCode) {\n        Subject subject = subjectService.getSubjectByCode(subjectCode);\n\
    \        return examRepository.findBySubject(subject)\n                .stream()\n\
    \                .map(exam -> new ExamWithoutSubjectDTO(\n                   \
    \     exam.getId(),\n                        exam.getYear(),\n               \
    \         exam.getType(),\n                        exam.getFileUrl()\n       \
    \         ))\n                .toList();\n    }\n\n    @Transactional\n    public\
    \ Exam updateExam(UUID id, UpdateExamDTO dto) {\n        Exam exam = getExamById(id);\n\
    \n        if (dto.subjectCode() != null) {\n            Subject newSubject = subjectService.getSubjectByCode(dto.subjectCode());\n\
    \            exam.setSubject(newSubject);\n        }\n\n        if (dto.year()\
    \ != null) {\n            exam.setYear(dto.year());\n        }\n\n        if (dto.type()\
    \ != null) {\n            exam.setType(dto.type());\n        }\n\n        if (dto.fileUrl()\
    \ != null) {\n            exam.setFileUrl(dto.fileUrl());\n        }\n\n     \
    \   return examRepository.save(exam);\n    }\n\n    @Transactional\n    public\
    \ void deleteExam(UUID id) {\n        Exam exam = getExamById(id);\n        examRepository.delete(exam);\n\
    \    }\n\n    public List<ExamWithoutSubjectDTO> getExamsBySubjectCode(String\
    \ subjectCode) {\n        List<Exam> exams = examRepository.findBySubjectSubjectCode(subjectCode);\n\
    \        return exams.stream()\n                .map(exam -> new ExamWithoutSubjectDTO(\n\
    \                        exam.getId(),\n                        exam.getYear(),\n\
    \                        exam.getType(),\n                        exam.getFileUrl()\n\
    \                ))\n                .toList();\n    }\n}"
  info:
    "size": "3715"
    "last_modified": "2026-01-07T16:01:24.748646679"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/controller/privateController/UserController.java"
  content: "package com.caco.sitedocaco.controller.privateController;\n\nimport com.caco.sitedocaco.dto.request.UpdateProfileDTO;\n\
    import com.caco.sitedocaco.dto.response.UserResponseDTO;\nimport com.caco.sitedocaco.service.UserService;\n\
    import lombok.RequiredArgsConstructor;\nimport org.springframework.http.MediaType;\n\
    import org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\
    import org.springframework.web.multipart.MultipartFile;\n\nimport java.io.IOException;\n\
    \n@RestController\n@RequestMapping(\"/api/user\")\n@RequiredArgsConstructor\n\
    public class UserController {\n\n    private final UserService userService;\n\n\
    \    @GetMapping(\"/me\")\n    public ResponseEntity<UserResponseDTO> getMyProfile()\
    \ {\n        return ResponseEntity.ok(userService.getMe());\n    }\n\n    @PutMapping(value\
    \ = \"/me\", consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\n    public ResponseEntity<UserResponseDTO>\
    \ updateMyProfile(\n            @RequestPart(value = \"name\", required = false)\
    \ String name,\n            @RequestPart(value = \"avatar\", required = false)\
    \ MultipartFile avatar) throws IOException {\n\n        UpdateProfileDTO dto =\
    \ new UpdateProfileDTO(name, avatar);\n        return ResponseEntity.ok(userService.updateProfile(dto));\n\
    \    }\n}"
  info:
    "size": "1233"
    "last_modified": "2026-01-07T16:01:24.755514874"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/controller/publicController/HomeController.java"
  content: "package com.caco.sitedocaco.controller.publicController;\n\nimport com.caco.sitedocaco.dto.response.BannerDTO;\n\
    import com.caco.sitedocaco.dto.response.DashboardDTO;\nimport com.caco.sitedocaco.dto.response.NewsSummaryDTO;\n\
    import com.caco.sitedocaco.dto.response.WarningDTO;\nimport com.caco.sitedocaco.service.BannerService;\n\
    import com.caco.sitedocaco.service.NewsService;\nimport com.caco.sitedocaco.service.WarningService;\n\
    import lombok.RequiredArgsConstructor;\nimport org.springframework.http.ResponseEntity;\n\
    import org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\
    import org.springframework.web.bind.annotation.RestController;\n\nimport java.util.List;\n\
    \n@RestController\n@RequestMapping(\"/api/public/home\")\n@RequiredArgsConstructor\n\
    public class HomeController {\n\n    private final BannerService bannerService;\n\
    \    private final WarningService warningService;\n    private final NewsService\
    \ newsService;\n\n    @GetMapping\n    public ResponseEntity<DashboardDTO> getHomeDashboard()\
    \ {\n        // 1. Busca banners ativos (ordenados por prioridade)\n        List<BannerDTO>\
    \ banners = bannerService.getActiveBanners();\n\n        // 2. Busca avisos urgentes\
    \ (que não expiraram)\n        List<WarningDTO> warnings = warningService.getActiveWarnings();\n\
    \n        // 3. Busca apenas as 3 últimas notícias para a capa\n        List<NewsSummaryDTO>\
    \ latestNews = newsService.getLatestNews(3);\n\n        // 4. Monta o objeto de\
    \ resposta agregado\n        DashboardDTO dashboard = new DashboardDTO(\n    \
    \            banners,\n                warnings,\n                latestNews\n\
    \        );\n\n        return ResponseEntity.ok(dashboard);\n    }\n}"
  info:
    "size": "1682"
    "last_modified": "2026-01-07T16:01:24.762068159"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/controller/publicController/ExamController.java"
  content: "package com.caco.sitedocaco.controller.publicController;\n\nimport com.caco.sitedocaco.dto.response.ExamWithoutSubjectDTO;\n\
    import com.caco.sitedocaco.entity.exam.Exam;\nimport com.caco.sitedocaco.entity.exam.Subject;\n\
    import com.caco.sitedocaco.service.ExamService;\nimport com.caco.sitedocaco.service.SubjectService;\n\
    import lombok.RequiredArgsConstructor;\nimport org.springframework.http.ResponseEntity;\n\
    import org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n\
    @RestController\n@RequestMapping(\"/api/public/exams\")\n@RequiredArgsConstructor\n\
    public class ExamController {\n\n    private final SubjectService subjectService;\n\
    \    private final ExamService examService;\n\n    @GetMapping(\"/subjects\")\n\
    \    public ResponseEntity<List<Subject>> getAllSubjects() {\n        List<Subject>\
    \ subjects = subjectService.getAllSubjects();\n        return ResponseEntity.ok(subjects);\n\
    \    }\n\n    @GetMapping(\"\")\n    public ResponseEntity<List<Exam>> getAllExams()\
    \ {\n        List<Exam> exams = examService.getAllExams();\n        return ResponseEntity.ok(exams);\n\
    \    }\n\n    @GetMapping(\"/subject/{subjectCode}\")\n    public ResponseEntity<List<ExamWithoutSubjectDTO>>\
    \ getExamsBySubject(@PathVariable String subjectCode) {\n        List<ExamWithoutSubjectDTO>\
    \ exams = examService.getExamsBySubject(subjectCode);\n        return ResponseEntity.ok(exams);\n\
    \    }\n}"
  info:
    "size": "1346"
    "last_modified": "2026-01-07T16:01:24.767609622"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/controller/admin/HomeAdminController.java"
  content: "package com.caco.sitedocaco.controller.admin;\n\nimport com.caco.sitedocaco.dto.request.*;\n\
    import com.caco.sitedocaco.dto.response.BannerDTO;\nimport com.caco.sitedocaco.dto.response.WarningDTO;\n\
    import com.caco.sitedocaco.entity.home.Banner;\nimport com.caco.sitedocaco.entity.home.News;\n\
    import com.caco.sitedocaco.entity.home.Warning;\nimport com.caco.sitedocaco.service.BannerService;\n\
    import com.caco.sitedocaco.service.NewsService;\nimport com.caco.sitedocaco.service.WarningService;\n\
    import jakarta.validation.Valid;\nimport lombok.RequiredArgsConstructor;\nimport\
    \ org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\n\
    import org.springframework.security.access.prepost.PreAuthorize;\nimport org.springframework.security.core.Authentication;\n\
    import org.springframework.web.bind.annotation.*;\n\nimport java.io.IOException;\n\
    import java.net.URI;\nimport java.nio.file.AccessDeniedException;\nimport java.util.List;\n\
    import java.util.Objects;\nimport java.util.UUID;\n\n@RestController\n@RequestMapping(\"\
    /api/admin\")\n@RequiredArgsConstructor\npublic class HomeAdminController {\n\n\
    \    private final NewsService newsService;\n    private final BannerService bannerService;\n\
    \    private final WarningService warningService;\n\n    // Helper para pegar\
    \ ID e Role (depende da sua config de security, assumindo Oauth2 padrão)\n   \
    \ private UUID getUserId(Authentication auth) {\n        // Exemplo: Se o Principal\
    \ for customizado ou extraído do Token JWT\n        // return UUID.fromString(auth.getName());\
    \ // ou lógica específica\n        // Para fins deste exemplo, assumimos que o\
    \ ID venha no Principal\n        return UUID.fromString(auth.getName());\n   \
    \ }\n\n    private boolean isAdmin(Authentication auth) {\n        return auth.getAuthorities().stream()\n\
    \                .anyMatch(a -> Objects.equals(a.getAuthority(), \"ROLE_ADMIN\"\
    ));\n    }\n\n    // ==================== NEWS (ADMIN + EDITOR) ====================\n\
    \n    @PostMapping(\"/news\")\n    @PreAuthorize(\"hasAnyRole('ADMIN', 'EDITOR')\"\
    )\n    public ResponseEntity<News> createNews(@RequestBody @Valid CreateNewsDTO\
    \ dto, Authentication auth) {\n        News created = newsService.createNews(dto,\
    \ getUserId(auth));\n        return ResponseEntity.created(URI.create(\"/api/public/news/\"\
    \ + created.getSlug())).body(created);\n    }\n\n    @PutMapping(\"/news/{id}\"\
    )\n    @PreAuthorize(\"hasAnyRole('ADMIN', 'EDITOR')\")\n    public ResponseEntity<News>\
    \ updateNews(@PathVariable UUID id,\n                                        \
    \   @RequestBody @Valid UpdateNewsDTO dto,\n                                 \
    \          Authentication auth) throws AccessDeniedException {\n        // Passamos\
    \ o ID e a flag isAdmin para o service validar a regra de \"Editor Owns News\"\
    \n        return ResponseEntity.ok(newsService.updateNews(id, dto, getUserId(auth),\
    \ isAdmin(auth)));\n    }\n\n    @DeleteMapping(\"/news/{id}\")\n    @PreAuthorize(\"\
    hasAnyRole('ADMIN', 'EDITOR')\")\n    public ResponseEntity<Void> deleteNews(@PathVariable\
    \ UUID id, Authentication auth) throws AccessDeniedException {\n        newsService.deleteNews(id,\
    \ getUserId(auth), isAdmin(auth));\n        return ResponseEntity.noContent().build();\n\
    \    }\n\n    // ==================== BANNERS (ADMIN ONLY) ====================\n\
    \n    @GetMapping(\"/banners/active\")\n    @PreAuthorize(\"hasRole('ADMIN')\"\
    )\n    public ResponseEntity<List<BannerDTO>> getActiveBanners() {\n        return\
    \ ResponseEntity.ok(bannerService.getActiveBanners());\n    }\n\n    @GetMapping(\"\
    /banners/inactive\")\n    @PreAuthorize(\"hasRole('ADMIN')\")\n    public ResponseEntity<List<BannerDTO>>\
    \ getInactiveBanners() {\n        return ResponseEntity.ok(bannerService.getInactiveBanners());\n\
    \    }\n\n    @PostMapping(value = \"/banners\", consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\n\
    \    @PreAuthorize(\"hasRole('ADMIN')\")\n    public ResponseEntity<Banner> createBanner(@ModelAttribute\
    \ @Valid CreateBannerDTO dto) throws IOException {\n        return ResponseEntity.ok(bannerService.createBanner(dto));\n\
    \    }\n\n    @PutMapping(value = \"/banners/{id}\", consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\n\
    \    @PreAuthorize(\"hasRole('ADMIN')\")\n    public ResponseEntity<Banner> updateBanner(\n\
    \            @PathVariable UUID id,\n            @ModelAttribute @Valid UpdateBannerDTO\
    \ dto) throws IOException {\n\n        Banner updated = bannerService.updateBanner(id,\
    \ dto);\n        return ResponseEntity.ok(updated);\n    }\n\n    @PutMapping(\"\
    /banners/{id}/toggle\")\n    @PreAuthorize(\"hasRole('ADMIN')\")\n    public ResponseEntity<Banner>\
    \ toggleBannerActive(@PathVariable UUID id) {\n        return ResponseEntity.ok(bannerService.toggleActive(id));\n\
    \    }\n\n    @PutMapping(\"/banners/reorder\")\n    @PreAuthorize(\"hasRole('ADMIN')\"\
    )\n    public ResponseEntity<Void> reorderBanners(@RequestBody @Valid ReorderBannersDTO\
    \ dto) {\n        bannerService.reorderBanners(dto.bannerIds());\n        return\
    \ ResponseEntity.noContent().build();\n    }\n\n    @DeleteMapping(\"/banners/{id}\"\
    )\n    @PreAuthorize(\"hasRole('ADMIN')\")\n    public ResponseEntity<Void> deleteBanner(@PathVariable\
    \ UUID id) {\n        bannerService.deleteBanner(id);\n        return ResponseEntity.noContent().build();\n\
    \    }\n\n    // ==================== WARNINGS (ADMIN ONLY) ====================\n\
    \    // Editors geralmente não postam alertas de infra, apenas notícias\n\n  \
    \  @GetMapping(\"/warnings\")\n    @PreAuthorize(\"hasRole('ADMIN')\")\n    public\
    \ ResponseEntity<List<WarningDTO>> getAllWarnings() {\n        return ResponseEntity.ok(warningService.getAllWarnings());\n\
    \    }\n\n    @PostMapping(\"/warnings\")\n    @PreAuthorize(\"hasRole('ADMIN')\"\
    )\n    public ResponseEntity<Warning> createWarning(@RequestBody @Valid CreateWarningDTO\
    \ dto) {\n        return ResponseEntity.ok(warningService.createWarning(dto));\n\
    \    }\n\n    @PutMapping(\"/warnings/{id}\")\n    @PreAuthorize(\"hasRole('ADMIN')\"\
    )\n    public ResponseEntity<Warning> updateWarning(@PathVariable UUID id, @RequestBody\
    \ @Valid UpdateWarningDTO dto) {\n        return ResponseEntity.ok(warningService.updateWarning(id,\
    \ dto));\n    }\n\n    @PutMapping(\"/warnings/{id}/expire\")\n    @PreAuthorize(\"\
    hasRole('ADMIN')\")\n    public ResponseEntity<Void> expireWarning(@PathVariable\
    \ UUID id) {\n        warningService.expireWarningNow(id);\n        return ResponseEntity.noContent().build();\n\
    \    }\n\n    @DeleteMapping(\"/warnings/{id}\")\n    @PreAuthorize(\"hasRole('ADMIN')\"\
    )\n    public ResponseEntity<Void> deleteWarning(@PathVariable UUID id) {\n  \
    \      warningService.deleteWarning(id);\n        return ResponseEntity.noContent().build();\n\
    \    }\n}"
  info:
    "size": "6446"
    "last_modified": "2026-01-07T16:01:24.774311897"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/controller/admin/ExamAdminController.java"
  content: "package com.caco.sitedocaco.controller.admin;\n\nimport com.caco.sitedocaco.dto.request.CreateExamDTO;\n\
    import com.caco.sitedocaco.dto.request.CreateSubjectDTO;\nimport com.caco.sitedocaco.dto.request.UpdateExamDTO;\n\
    import com.caco.sitedocaco.dto.response.ExamWithoutSubjectDTO;\nimport com.caco.sitedocaco.entity.exam.Exam;\n\
    import com.caco.sitedocaco.entity.exam.Subject;\nimport com.caco.sitedocaco.service.ExamService;\n\
    import com.caco.sitedocaco.service.SubjectService;\nimport jakarta.validation.Valid;\n\
    import lombok.RequiredArgsConstructor;\nimport org.springframework.http.HttpStatus;\n\
    import org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\n\
    import org.springframework.security.access.prepost.PreAuthorize;\nimport org.springframework.web.bind.annotation.*;\n\
    \nimport java.io.IOException;\nimport java.util.List;\nimport java.util.UUID;\n\
    \n@RestController\n@RequestMapping(\"/api/admin/exams\")\n@RequiredArgsConstructor\n\
    @PreAuthorize(\"hasRole('ADMIN')\")\npublic class ExamAdminController {\n\n  \
    \  private final SubjectService subjectService;\n    private final ExamService\
    \ examService;\n\n    // ==================== DISCIPLINAS ====================\n\
    \n    @PostMapping(\"/subjects\")\n    public ResponseEntity<Subject> createSubject(@RequestBody\
    \ @Valid CreateSubjectDTO dto) {\n        Subject createdSubject = subjectService.createSubject(dto);\n\
    \        return ResponseEntity.status(HttpStatus.CREATED).body(createdSubject);\n\
    \    }\n\n    @GetMapping(\"/subjects\")\n    public ResponseEntity<List<Subject>>\
    \ getAllSubjects() {\n        List<Subject> subjects = subjectService.getAllSubjects();\n\
    \        return ResponseEntity.ok(subjects);\n    }\n\n    @GetMapping(\"/subjects/{subjectCode}\"\
    )\n    public ResponseEntity<Subject> getSubject(@PathVariable String subjectCode)\
    \ {\n        Subject subject = subjectService.getSubjectByCode(subjectCode);\n\
    \        return ResponseEntity.ok(subject);\n    }\n\n    @DeleteMapping(\"/subjects/{subjectCode}\"\
    )\n    public ResponseEntity<Void> deleteSubject(@PathVariable String subjectCode)\
    \ {\n        subjectService.deleteSubject(subjectCode);\n        return ResponseEntity.noContent().build();\n\
    \    }\n\n    // ==================== PROVAS ====================\n\n    @PostMapping\n\
    \    public ResponseEntity<Exam> createExam(@RequestBody @Valid CreateExamDTO\
    \ dto) {\n        Exam createdExam = examService.createExam(dto);\n        return\
    \ ResponseEntity.status(HttpStatus.CREATED).body(createdExam);\n    }\n\n    @GetMapping(\"\
    \")\n    public ResponseEntity<List<Exam>> getAllExams() {\n        List<Exam>\
    \ exams = examService.getAllExams();\n        return ResponseEntity.ok(exams);\n\
    \    }\n\n    @GetMapping(\"/subject/{subjectCode}\")\n    public ResponseEntity<List<ExamWithoutSubjectDTO>>\
    \ getExamsBySubject(@PathVariable String subjectCode) {\n        List<ExamWithoutSubjectDTO>\
    \ exams = examService.getExamsBySubject(subjectCode);\n        return ResponseEntity.ok(exams);\n\
    \    }\n\n    @GetMapping(\"/{id}\")\n    public ResponseEntity<Exam> getExam(@PathVariable\
    \ UUID id) {\n        Exam exam = examService.getExamById(id);\n        return\
    \ ResponseEntity.ok(exam);\n    }\n\n    @PutMapping(\"/{id}\")\n    public ResponseEntity<Exam>\
    \ updateExam(\n            @PathVariable UUID id,\n            @RequestBody UpdateExamDTO\
    \ dto) {\n\n        Exam updatedExam = examService.updateExam(id, dto);\n    \
    \    return ResponseEntity.ok(updatedExam);\n    }\n\n    @DeleteMapping(\"/{id}\"\
    )\n    public ResponseEntity<Void> deleteExam(@PathVariable UUID id) {\n     \
    \   examService.deleteExam(id);\n        return ResponseEntity.noContent().build();\n\
    \    }\n}"
  info:
    "size": "3535"
    "last_modified": "2026-01-07T16:01:24.780035531"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/controller/admin/ImageAdminController.java"
  content: "package com.caco.sitedocaco.controller.admin;\n\nimport com.caco.sitedocaco.dto.response.ImageUploadResponseDTO;\n\
    import com.caco.sitedocaco.entity.enums.ImageType;\nimport com.caco.sitedocaco.service.ImgBBService;\n\
    import jakarta.validation.constraints.NotNull;\nimport lombok.RequiredArgsConstructor;\n\
    import org.springframework.http.HttpStatus;\nimport org.springframework.http.MediaType;\n\
    import org.springframework.http.ResponseEntity;\nimport org.springframework.security.access.prepost.PreAuthorize;\n\
    import org.springframework.web.bind.annotation.*;\nimport org.springframework.web.multipart.MultipartFile;\n\
    \nimport java.io.IOException;\n\n@RestController\n@RequestMapping(\"/api/admin/images\"\
    )\n@RequiredArgsConstructor\n@PreAuthorize(\"hasRole('ADMIN')\")\npublic class\
    \ ImageAdminController {\n\n    private final ImgBBService imgBBService;\n\n \
    \   /**\n     * Upload de imagem genérica\n     */\n    @PostMapping(value = \"\
    \", consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\n    public ResponseEntity<ImageUploadResponseDTO>\
    \ uploadImage(\n            @RequestParam(\"image\") @NotNull MultipartFile image)\
    \ throws IOException {\n        String imageUrl = imgBBService.uploadImage(image);\n\
    \n        return ResponseEntity.ok(new ImageUploadResponseDTO(imageUrl));\n  \
    \  }\n}"
  info:
    "size": "1243"
    "last_modified": "2026-01-07T16:01:24.783658841"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/exception/GlobalExceptionHandler.java"
  content: "package com.caco.sitedocaco.exception;\n\nimport com.caco.sitedocaco.dto.response.ErrorResponseDTO;\n\
    import jakarta.servlet.http.HttpServletRequest;\nimport org.springframework.http.HttpStatus;\n\
    import org.springframework.http.ResponseEntity;\nimport org.springframework.security.access.AccessDeniedException;\n\
    import org.springframework.web.bind.MethodArgumentNotValidException;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\n\
    import org.springframework.web.bind.annotation.RestControllerAdvice;\nimport org.springframework.web.servlet.resource.NoResourceFoundException;\n\
    \nimport java.io.IOException;\nimport java.time.LocalDateTime;\n\n@RestControllerAdvice\n\
    public class GlobalExceptionHandler {\n\n    // 1. Handle Resource Not Found (404)\n\
    \    @ExceptionHandler(ResourceNotFoundException.class)\n    public ResponseEntity<ErrorResponseDTO>\
    \ handleNotFound(ResourceNotFoundException ex, HttpServletRequest request) {\n\
    \        return buildResponse(HttpStatus.NOT_FOUND, ex.getMessage(), request);\n\
    \    }\n\n    @ExceptionHandler(IllegalArgumentException.class)\n    public ResponseEntity<ErrorResponseDTO>\
    \ handleIllegalArgument(IllegalArgumentException ex, HttpServletRequest request)\
    \ {\n        return buildResponse(HttpStatus.BAD_REQUEST, ex.getMessage(), request);\n\
    \    }\n\n    // 2. Handle Business Rules (400)\n    @ExceptionHandler(BusinessRuleException.class)\n\
    \    public ResponseEntity<ErrorResponseDTO> handleBusinessRule(BusinessRuleException\
    \ ex, HttpServletRequest request) {\n        return buildResponse(HttpStatus.BAD_REQUEST,\
    \ ex.getMessage(), request);\n    }\n\n    // 3. Handle Security/Access Denied\
    \ (403) - e.g. Student trying to access Admin route\n    @ExceptionHandler(AccessDeniedException.class)\n\
    \    public ResponseEntity<ErrorResponseDTO> handleAccessDenied(AccessDeniedException\
    \ ex, HttpServletRequest request) {\n        return buildResponse(HttpStatus.FORBIDDEN,\
    \ \"Acesso negado: Você não tem permissão.\", request);\n    }\n\n    @ExceptionHandler(MethodArgumentNotValidException.class)\n\
    \    public ResponseEntity<ErrorResponseDTO> handleValidationErrors(MethodArgumentNotValidException\
    \ ex, HttpServletRequest request) {\n        StringBuilder errors = new StringBuilder(\"\
    Erros de validação: \");\n        ex.getBindingResult().getFieldErrors().forEach(error\
    \ ->\n                errors.append(String.format(\"[%s: %s] \", error.getField(),\
    \ error.getDefaultMessage()))\n        );\n        return buildResponse(HttpStatus.BAD_REQUEST,\
    \ errors.toString(), request);\n    }\n\n    @ExceptionHandler(NoResourceFoundException.class)\n\
    \    public ResponseEntity<ErrorResponseDTO> handleNoResourceFound(NoResourceFoundException\
    \ ex, HttpServletRequest request) {\n        return buildResponse(HttpStatus.NOT_FOUND,\
    \ \"Recurso requisitado não encontrado.\", request);\n    }\n\n    @ExceptionHandler(IOException.class)\n\
    \    public ResponseEntity<ErrorResponseDTO> handleIOException(IOException ex,\
    \ HttpServletRequest request) {\n        return buildResponse(HttpStatus.INTERNAL_SERVER_ERROR,\
    \ \"Erro interno ao processar o arquivo.\", request);\n    }\n\n    // 4. Handle\
    \ Generic/Unexpected Errors (500)\n    @ExceptionHandler(Exception.class)\n  \
    \  public ResponseEntity<ErrorResponseDTO> handleGeneric(Exception ex, HttpServletRequest\
    \ request) {\n        // Log the real error here so you can debug it later\n \
    \       ex.printStackTrace();\n        return buildResponse(HttpStatus.INTERNAL_SERVER_ERROR,\
    \ \"Erro interno do servidor. Tente novamente mais tarde.\", request);\n    }\n\
    \n    // Helper method to build the JSON response\n    private ResponseEntity<ErrorResponseDTO>\
    \ buildResponse(HttpStatus status, String message, HttpServletRequest request)\
    \ {\n        ErrorResponseDTO error = new ErrorResponseDTO(\n                LocalDateTime.now(),\n\
    \                status.value(),\n                status.getReasonPhrase(),\n\
    \                message,\n                request.getRequestURI()\n        );\n\
    \        return ResponseEntity.status(status).body(error);\n    }\n}"
  info:
    "size": "3929"
    "last_modified": "2026-01-07T16:01:24.789618299"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/exception/ResourceNotFoundException.java"
  content: "package com.caco.sitedocaco.exception;\n\npublic class ResourceNotFoundException\
    \ extends RuntimeException {\n    public ResourceNotFoundException(String message)\
    \ {\n        super(message);\n    }\n}"
  info:
    "size": "192"
    "last_modified": "2026-01-07T16:01:24.792796435"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "main/java/com/caco/sitedocaco/exception/BusinessRuleException.java"
  content: "package com.caco.sitedocaco.exception;\n\npublic class BusinessRuleException\
    \ extends RuntimeException {\n    public BusinessRuleException(String message)\
    \ {\n        super(message);\n    }\n}\n"
  info:
    "size": "185"
    "last_modified": "2026-01-07T16:01:24.795918104"
    "mime_type": "text/x-java-source"
    "extension": ".java"
- path: "test/java/com/caco/sitedocaco/SitedocacoApplicationTests.java"
  content: "package com.caco.sitedocaco;\n\nimport org.junit.jupiter.api.Test;\nimport\
    \ org.springframework.boot.test.context.SpringBootTest;\n\n@SpringBootTest\nclass\
    \ SitedocacoApplicationTests {\n\n\t@Test\n\tvoid contextLoads() {\n\t}\n\n}\n"
  info:
    "size": "215"
    "last_modified": "2026-01-07T16:01:24.807359346"
    "mime_type": "text/x-java-source"
    "extension": ".java"